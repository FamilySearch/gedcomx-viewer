{"version":3,"sources":["test_image.jpg","App.js","reportWebVitals.js","reducer.js","index.js"],"names":["useStyles","makeStyles","theme","app","height","display","flexDirection","imageViewer","flex","imageBar","padding","spacing","alignItems","margin","editor","borderLeft","justifyContent","width","pad","coords","paddingLeft","backgroundColor","paddingTop","paddingBottom","pixelSwitch","labels","textAlign","fontWeight","values","root","flexGrow","paper","color","palette","text","secondary","isNumber","something","isNaN","undefined","padWithZeros","num","padEnd","substr","overlay","id","x","y","movable","resizable","selectable","type","App","classes","useState","x1","y1","x2","y2","setCoords","setBtnDisabled","setSetBtnDisabled","loadBtnDisabled","setLoadBtnDisabled","nineFive","setNineFive","session","setSession","pixels","setPixels","imageSize","setImageSize","viewer","useRef","sessionInput","nineFiveInput","coordsInput","setButton","loadButton","clearCoordinatesButton","renderCoords","Math","round","onOverlayChange","evt","detail","overlays","Object","assign","onImageLoad","useEffect","document","title","viewerRef","current","addAndSelect","addEventListener","urlSearchParams","URLSearchParams","window","location","search","params","fromEntries","entries","source","value","oldSession","sessionStorage","getItem","removeEventListener","handleLoad","nextNineFive","nextSession","setItem","set","newUrl","protocol","host","pathname","toString","history","pushState","path","handleSetCoords","split","map","parseFloat","update","blur","testImage","coordsToDraw","CssBaseline","className","TextField","label","variant","style","inputRef","Button","onClick","open","onKeyPress","key","onChange","nextLoadBtnDisabled","group","imageNum","ref","disabled","src","multiline","rows","nextSetBtnDisabled","Switch","target","checked","startIcon","navigator","clipboard","writeText","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","defaultState","persons","facts","reducer","state","store","createStore","mainReducer","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0ed977f0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/test_image.1815956c.jpg\";","import { useRef, useEffect, useState } from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport '../node_modules/image-viewer/dist/singleImage/singleImage.iife.min.js'\nimport testImage from './test_image.jpg';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button'\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField'\nimport AssignmentIcon from '@material-ui/icons/Assignment';\n\nconst useStyles = makeStyles((theme) => ({\n  app: {\n    height: '100vh',\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  imageViewer: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  imageBar: {\n    display: 'flex',\n    flexDirection: 'row',\n    padding: theme.spacing(0.5),\n    alignItems: 'center',\n    '& *' : {\n      margin: theme.spacing(0.2)\n    }\n  },\n  editor: {\n    borderLeft: '1px solid #ccc',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    width: 250,\n    padding: theme.spacing(0.5),\n    '& *' : {\n      margin: theme.spacing(0.2)\n    }\n  },\n  pad: {\n    height: 50,\n  },\n  coords: {\n    display: 'flex',\n    flexDirection: 'row',\n    margin: 0,\n    paddingLeft: theme.spacing(5),\n    backgroundColor: '#eee',\n    paddingTop: theme.spacing(10),\n    paddingBottom: theme.spacing(10)\n  },\n  pixelSwitch: {\n    display: 'flex',\n    flexDirection: 'row',\n    margin: 0,\n    backgroundColor: '#eee',\n    justifyContent: 'center',\n    alignItems: 'center',\n    '& span': {\n      margin: 0\n    }\n  },\n  labels: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flexEnd',\n    textAlign: 'right',\n    fontWeight: 700\n  },\n  values: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n}));\n\nconst isNumber = something => {\n  return (!isNaN(something) && something !== null && something !== undefined);\n}\n\nconst padWithZeros = num => {\n  const FIGS = 16;\n  return `${num === 1 ? '1.0' : num}`.padEnd(FIGS, '0').substr(0, FIGS);\n}\n\nlet overlay = {\n  id: 'overlay',\n  x: 0.4, y: 0.57,\n  width: 0.25, height: 0.25,\n  movable: true,\n  resizable: true,\n  selectable: true,\n  type: 'name'\n};\n\nconst App = () => {\n  const classes = useStyles();\n\n  const [ coords, setCoords ] = useState({\n    x1: overlay.x,\n    y1: overlay.y,\n    x2: overlay.x + overlay.width,\n    y2: overlay.y + overlay.height\n  });\n  const [ setBtnDisabled, setSetBtnDisabled ] = useState(true);\n  const [ loadBtnDisabled, setLoadBtnDisabled ] = useState(true);\n  const [ nineFive, setNineFive ] = useState();\n  const [ session, setSession ] = useState();\n  const [ pixels, setPixels ] = useState(false);\n  const [ imageSize, setImageSize ] = useState({ width: 1, height: 1 });\n  const viewer = useRef();\n  const sessionInput = useRef();\n  const nineFiveInput = useRef();\n  const coordsInput = useRef();\n  const setButton = useRef();\n  const loadButton = useRef();\n  const clearCoordinatesButton = useRef();\n\n  const renderCoords = () => {\n    if (coords && imageSize) {\n      const { x1, y1, x2, y2 } = coords;\n      if (pixels) {\n        return {\n          x1: Math.round(x1 * imageSize.width),\n          y1: Math.round(y1 * imageSize.height),\n          x2: Math.round(x2 * imageSize.width),\n          y2: Math.round(y2 * imageSize.height)\n        };\n      }\n      return {\n        x1: padWithZeros(x1),\n        y1: padWithZeros(y1),\n        x2: padWithZeros(x2),\n        y2: padWithZeros(y2)\n      };\n    }\n    return null;\n  }\n\n  const onOverlayChange = evt => {\n    if (evt.detail.overlays[overlay.id]) {\n      const { x, y, width, height } = evt.detail.overlays[overlay.id];\n      Object.assign(overlay, evt.detail.overlays[overlay.id]);\n      setCoords({ x1: x, y1: y, x2: x + width, y2: y + height });\n    }\n  }\n\n  const onImageLoad = evt => {\n    if (evt.detail) {\n      const { width, height } = evt.detail;\n      setImageSize({ width, height });\n    }\n  }\n\n  useEffect(() => {\n    // runs once when component mounts\n    document.title = \"Ace-Bbox\";\n    let viewerRef = null;\n    if (viewer.current) {\n      viewerRef = viewer.current;\n      viewer.current.overlays.addAndSelect(overlay);\n      viewerRef.addEventListener('fs-single-image-viewer:overlay-change', onOverlayChange);\n      viewerRef.addEventListener('fs-single-image-viewer:image-load', onImageLoad);\n    }\n\n    //check for query string\n    const urlSearchParams = new URLSearchParams(window.location.search);\n    const params = Object.fromEntries(urlSearchParams.entries());\n    \n    if (params.source) {\n      setNineFive(params.source)\n      if (nineFiveInput.current) {\n        nineFiveInput.current.value = params.source;\n      }\n    }\n\n    const oldSession = window.sessionStorage.getItem('session');\n    if (oldSession) {\n      setSession(oldSession);\n      if (sessionInput.current) {\n        sessionInput.current.value = oldSession;\n      }\n    }\n\n    return () => {\n      viewerRef.removeEventListener('fs-single-image-viewer:overlay-change', onOverlayChange);\n      viewerRef.removeEventListener('fs-single-image-viewer:image-load', onImageLoad);\n    };\n  }, [])\n\n  const handleGetSessionId = () => {\n    window.open(\"https://www.familysearch.org/platform/\", '_blank', 'noopener,noreferrer');\n  }\n\n  const handleLoad = () => {\n    if (nineFiveInput.current && sessionInput.current) {\n      const nextNineFive = nineFiveInput.current.value;\n      setNineFive(nextNineFive);\n\n      const nextSession = sessionInput.current.value;\n      if (nextSession && nextSession !== session) {\n        setSession(nextSession);\n        window.sessionStorage.setItem('session', nextSession);\n      }\n\n      const urlSearchParams = new URLSearchParams(window.location.search);\n      urlSearchParams.set('source', nextNineFive);\n      const newUrl = `${window.location.protocol}//${window.location.host}${window.location.pathname}?${urlSearchParams.toString()}`;\n      window.history.pushState({ path: newUrl }, '', newUrl);\n    }\n  }\n\n  const handleNineFiveInputKeyPress = evt => {\n    if(evt.key === 'Enter'){\n      handleLoad();\n      nineFiveInput.current.blur();\n    }\n  }\n\n  const handleNineFiveInputChange = evt => {\n    let nextLoadBtnDisabled = true;\n    if (nineFiveInput.current && nineFiveInput.current.value) {\n      const [group, imageNum] = nineFiveInput.current.value.split('_');\n      if (isNumber(group) && isNumber(imageNum)) {\n        nextLoadBtnDisabled = false;\n      }\n    }\n\n    if (nextLoadBtnDisabled !== loadBtnDisabled) {\n      setLoadBtnDisabled(nextLoadBtnDisabled);\n    }\n  }\n\n\n  const handleSetCoords = () => {\n    if (coordsInput.current) {\n      if (coordsInput.current.value) {\n        let [ x1, y1, x2, y2 ] = coordsInput.current.value.split(',').map(parseFloat);\n        if (isNumber(x1) && isNumber(y1) && isNumber(x2) && isNumber(y2) && x2 > x1 && y2 > y1) {\n          if (pixels) {\n              x1 = x1 / imageSize.width;\n              y1 = y1 / imageSize.height;\n              x2 = x2 / imageSize.width;\n              y2 = y2 / imageSize.height;\n          }\n          Object.assign(overlay, {\n            x: (x1),\n            y: (y1),\n            width: (x2 - x1),\n            height: (y2 - y1)\n          });\n          viewer.current.overlays.update(overlay);\n          setCoords({ x1, y1, x2, y2 });\n          coordsInput.current.value = null;\n          setSetBtnDisabled(true);\n          coordsInput.current.blur();\n        }\n      }\n    }\n  }\n\n  const handleClearCoords = () => {\n    coordsInput.current.value = null;\n  }\n\n  const handleCopyToClipboard = () => {\n    const coordsToDraw = renderCoords();\n    if (coordsToDraw) {\n      const { x1, y1, x2, y2 } = coordsToDraw;\n      navigator.clipboard.writeText(`${x1}, ${y1}, ${x2}, ${y2}`);\n    }\n  }\n\n const handleCoordsInputChange = evt => {\n    let nextSetBtnDisabled = true;\n    if (coordsInput.current && coordsInput.current.value) {\n      const [ x1, y1, x2, y2 ] = coordsInput.current.value.split(',').map(parseFloat);\n      if (isNumber(x1) && isNumber(y1) && isNumber(x2) && isNumber(y2) && x2 > x1 && y2 > y1) {\n        nextSetBtnDisabled = false;\n      }  \n    }\n\n    if (nextSetBtnDisabled !== setBtnDisabled) {\n      setSetBtnDisabled(nextSetBtnDisabled);\n    }\n  }\n\n  const handleCoordInputKeyPress = evt => {\n    if(evt.key === 'Enter'){\n      handleSetCoords();\n    }\n  }\n\n  const source = nineFive\n    ? `https://www.familysearch.org/dz/v1/dgs:${nineFive}/image.xml?ctx=&session=${session}`\n    : testImage\n  ;\n\n  const handlePixelSwitch = evt => {\n    setPixels(evt.target.checked);\n  }\n  const coordsToDraw = renderCoords();\n\n  return (\n    <>\n      <CssBaseline/>\n      <div className={classes.app}>\n        <div className={classes.imageViewer}>\n          <div className={classes.imageBar}>\n            <TextField id=\"sessionField\" label=\"Session ID\" variant=\"outlined\" style={{width: 385}} inputRef={sessionInput}/>\n            <Button variant=\"contained\" color=\"primary\" onClick={handleGetSessionId} >Get Session Id</Button>\n            <TextField id=\"outlined-basic\" label=\"Image Number\" variant=\"outlined\" onKeyPress={handleNineFiveInputKeyPress}onChange={handleNineFiveInputChange} inputRef={nineFiveInput}/>\n            <Button variant=\"contained\" color=\"primary\" onClick={handleLoad}  ref={loadButton}  disabled={loadBtnDisabled}>Load Image</Button>\n         </div>\n          <fs-single-image-viewer\n            ref={viewer}\n            // src={testImage}\n            src={source}\n          ></fs-single-image-viewer>\n        </div>\n        <div className={classes.editor}>\n          <TextField id=\"outlined-basic\" label=\"x1, y1, x2, y2\" variant=\"outlined\" multiline={true} rows={4} onChange={handleCoordsInputChange} onKeyPress={handleCoordInputKeyPress} inputRef={coordsInput}/>\n          <Button variant=\"contained\" color=\"primary\" onClick={handleSetCoords} disabled={setBtnDisabled} ref={setButton}>Set Box</Button>\n          <Button variant=\"contained\" color=\"primary\" onClick={handleClearCoords} disabled={setBtnDisabled} ref={clearCoordinatesButton}>Clear Coordinates</Button>\n\n          <div className={classes.coords}>\n            <div className={classes.labels}>\n              <label>x1:</label>\n              <label>y1:</label>\n              <label>x2:</label>\n              <label>y2:</label>\n            </div>\n            <div className={classes.values}>\n              <span>{coordsToDraw.x1}</span>\n              <span>{coordsToDraw.y1}</span>\n              <span>{coordsToDraw.x2}</span>\n              <span>{coordsToDraw.y2}</span>\n            </div>\n          </div>\n          <div className={classes.pixelSwitch}>\n            <p>Use pixels</p>\n            <Switch color=\"secondary\" onChange={handlePixelSwitch}/>\n          </div>\n          <Button startIcon={<AssignmentIcon />} variant=\"outlined\" color=\"primary\" onClick={handleCopyToClipboard}>Copy To Clipboard</Button>\n        </div>\n      </div>\n\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const defaultState = {\n  persons: {},\n  facts: {},\n};\nconst reducer = (state = defaultState, action = null) => {\n  return state;\n}\n\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport mainReducer from './reducer';\n\nconst store = createStore(mainReducer);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}