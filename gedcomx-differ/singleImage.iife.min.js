!function(){const e={IN_DOM:"IN_DOM",VIEW_SIZE:"VIEW_SIZE",PAN_ZOOM:"PAN_ZOOM",ZOOM_MIN:"ZOOM_MIN",ZOOM_MAX:"ZOOM_MAX",SCROLLING_PARENT:"SCROLLING_PARENT",ZOOM_DISABLED:"ZOOM_DISABLED",ROTATE_DISABLED:"ROTATE_DISABLED",PAN_DISABLED:"PAN_DISABLED",ROTATE:"ROTATE",LOCALE:"LOCALE",IMAGE_CURRENT:"IMAGE_CURRENT",IMAGE_INFO:"IMAGE_INFO",IMAGE_INFO_ERROR:"IMAGE_INFO_ERROR",IMAGE_MSG:"IMAGE_MSG",IMAGES:"IMAGES",CREDENTIALS:"CREDENTIALS",KEYBOARD_LISTEN:"KEYBOARD_LISTEN",DRAWING_ENABLED:"DRAWING_ENABLED",FULLSCREEN:"FULLSCREEN",TOOLS_CONTROL:"TOOLS_CONTROL",FULLSCREEN_CONTROL:"FULLSCREEN_CONTROL",GRID_CONTROL:"GRID_CONTROL",DOWNLOAD_CONTROL:"DOWNLOAD_CONTROL",DOWNLOAD_IMAGE:"DOWNLOAD_IMAGE",HIDE_ZOOM_BUTTONS:"HIDE_ZOOM_BUTTONS",NAVIGATION:"NAVIGATION",NAVIGATION_ARROWS:"NAVIGATION_ARROWS",NAVIGATION_RETURN_TO_ORIG:"NAVIGATION_RETURN_TO_ORIG",grid:{COLUMN_COUNT:"COLUMN_COUNT",selection:{ADD:"SELECTION_ADD",REMOVE:"SELECTION_REMOVE",CLEAR:"SELECTION_CLEAR"},HEADERS:"HEADERS",VISIBLE_IMAGES:"VISIBLE_IMAGES",MODE:"GRID_MODE",HORIZONTAL:"HORIZONTAL",SHOW_IMAGE_NUMBERS:"SHOW_IMAGE_NUMBERS"},overlays:{OVERLAYS:"OVERLAYS",ADD:"OVERLAY_ADD",UPDATE:"OVERLAY_UPDATE",DELETE:"OVERLAY_DELETE",highlights:{ADD:"OVERLAY_HIGHLIGHT_ADD",REMOVE:"OVERLAY_HIGHLIGHT_REMOVE",CLEAR:"OVERLAY_HIGHLIGHT_CLEAR"},selection:{ADD:"OVERLAY_SELECTION_ADD",REMOVE:"OVERLAY_SELECTION_REMOVE",CLEAR:"OVERLAY_SELECTION_CLEAR"}},markers:{MARKERS:"MARKERS",ADD:"MARKER_ADD",UPDATE:"MARKER_UPDATE",DELETE:"MARKER_DELETE"},user:{POINT_DOWN:"POINT_DOWN",POINT_UP:"POINT_UP",POINT_MOVE:"POINT_MOVE",SCROLL:"SCROLL"},filters:{BRIGHTNESS:"BRIGHTNESS",BRIGHTNESS_MIN:"BRIGHTNESS_MIN",BRIGHTNESS_MAX:"BRIGHTNESS_MAX",CONTRAST:"CONTRAST",CONTRAST_MIN:"CONTRAST_MIN",CONTRAST_MAX:"CONTRAST_MAX",INVERT:"INVERT"}},t="ArrowLeft",r="ArrowRight",n="ArrowUp",o="ArrowDown",i="Enter",a=" ",s="+",l="-",c="=",d="_",g="<",m=">",u="/",p="Escape",v={OBJECT:{},ARRAY:[]},h={PANNING:"PANNING",RESIZING:"RESIZING",MOVING:"MOVING",DRAWING:"DRAWING"},f={SUCCESS:null,INFO:"info",WARNING:"warning",ERROR:"error"},w=/\w+\.\w+$/,b=/ (Format|TileSize|Overlap|Width|Height)="?(\w+)/g,y=/\="?/,_=e=>e.match(b).map(e=>e.split(y)).map(([e,t])=>[e[1].toLowerCase()+e.slice(2),t]).reduce((e,[t,r])=>(e[t]="format"===t?r:parseInt(r,10),e),{}),I=e=>""===e||Boolean(e),x=e=>e?String(e):"",O=e=>e.replace(/-([a-z])/g,e=>e[1].toUpperCase()),E={400:"errBadRequest",401:"errInsufficientPermissions",403:"errForbidden",404:"errNotFound",405:"errMethodNotAllowed",406:"errNotAcceptable",408:"errRequestTimeout",500:"errInternalServerError",501:"errNotImplemented",502:"errBadGateway",503:"errServiceUnavailable",504:"errGatewayTimeout"},A=e=>({message:`${E[e.status]||e.status||"errUnknown"}`,response:e}),{KEYBOARD_LISTEN:N,PAN_ZOOM:T,ZOOM_MIN:R,ZOOM_MAX:M,PAN_DISABLED:k,ROTATE_DISABLED:C,ZOOM_DISABLED:L,DRAWING_ENABLED:S,FULLSCREEN:z,ROTATE:D,IMAGE_INFO:P,IMAGE_MSG:B,IMAGE_INFO_ERROR:F,IMAGE_CURRENT:G,IMAGES:j,CREDENTIALS:$,SCROLLING_PARENT:H,TOOLS_CONTROL:Z,GRID_CONTROL:V,DOWNLOAD_CONTROL:U,DOWNLOAD_IMAGE:Y,FULLSCREEN_CONTROL:q,HIDE_ZOOM_BUTTONS:X,LOCALE:W,NAVIGATION:K,NAVIGATION_ARROWS:J,NAVIGATION_RETURN_TO_ORIG:Q}=e,{INVERT:ee,BRIGHTNESS:te,CONTRAST:re}=e.filters,{INFO:ne,WARNING:oe,ERROR:ie}=f;var ae=(e,{dispatch:t,getState:r},{zoomStep:n=1.2}={})=>{e.getIndexOf=(e=>r().orderedImages.indexOf(e)),e.zoomIn=(()=>e.zoom*=n),e.zoomOut=(()=>e.zoom/=n);const o=(e,r,n)=>t({type:B,data:{text:e,type:r,closer:n}});e.prompt=((e,t)=>o(e,ne,t)),e.warn=((e,t)=>o(e,oe,t)),e.error=((e,t)=>o(e,ie,t)),e.clearMessage=(()=>t({type:B,data:null})),e.gotoNextRow=(()=>{}),e.gotoPreviousRow=(()=>{}),e.getImageAt=(e=>{const{orderedImages:t}=r();if(t&&t.length)return e<0?t[0]:e>=t.length?t[t.length-1]:t[e]});const i=()=>{const{src:n,credentials:o}=e;if(n&&o){let e=r().images[n];if(!e){e=(e=>{if(!e||(e=>e&&e.match(/^data:image/))(e))return{query:""};const[t,...r]=e.split("?");let n=r.join("&");if(n=n&&`?${n}`,(e=>e&&e.match(/\.(jpg|jpeg|png|gif|tif|tiff|svg|bmp)$/))(t))return{query:n};const o=t.match(w)?t:`${t.replace(/\/$/,"")}/image.xml`,i=`${o.replace(/\.\w+$/,"")}_files`;return{dzi:o,tilePath:i,query:n}})(n);const{dzi:r,query:i}=e;if(r)((e,t="include")=>fetch(e,{credentials:t}).then(e=>e.ok?e.text().then(_):Promise.reject(e)))(r+i,o).then(r=>{t({type:P,data:Object.assign(r,e),image:n})}).catch(e=>{t({type:F,data:A(e),image:n})});else{const r=new Image;r.onload=(()=>{const{width:o,height:i}=r;t({type:P,data:Object.assign({width:o,height:i},e),image:n})}),r.onerror=(e=>{t({type:F,data:A(e),image:n})}),r.src=n}}}},a=e=>e,s=(e,t)=>({[t]:e}),l={},c=(e,n,o=a,i=a,s=(()=>r()[e]))=>{l[e]={get:s,set:r=>{t({type:n,data:o(r,e)}),i(r)}}};c("credentials",$,x,i),c("drawMode",S,I),c("fullscreen",z,I),c("listeningToKeyboard",N,I),c("maxZoom",M),c("minZoom",R),c("noPan",k,I),c("noRotate",C,I),c("noZoom",L,I),c("panX",T,s),c("panY",T,s),c("src",G,x,i,()=>r().currentImage),c("zoom",T,s),c("scrollingParent",H,I),c("toolsControl",Z,I),c("gridControl",V,I),c("fullscreenControl",q,I),c("downloadControl",U,I),c("downloadImage",Y,I),c("hideZoomButtons",X,I),c("invert",ee,I),c("brightness",te,Number),c("contrast",re,Number),c("locale",W,x),c("navigation",K,I),c("navigationArrows",J,I),c("navigationReturnToOrig",Q,I),Object.defineProperties(e,l),Object.defineProperties(e,{columnCount:{configurable:!0,get:()=>1,set:e=>e},gridMode:{configurable:!0,get:()=>!1,set:e=>e},index:{get:()=>(e=>r().orderedImages?r().orderedImages.indexOf(e):0)(e.src),set:r=>{if(isNaN(r))throw new Error("Index must be a number");if(!e.srcs||!e.length){if(e.gridMode)throw new Error("Must set srcs property before setting the index property");return r}t({type:G,data:e.getImageAt(r)})}},length:{configurable:!0,get:()=>e.src?1:0},nativeSize:{get:()=>{const e=r(),t=e.images[e.currentImage]||{},{width:n,height:o}=t;return{width:n,height:o}}},panZoom:{get:()=>{const{panX:e,panY:t,zoom:n}=r();return{panX:e,panY:t,zoom:n}},set:e=>{const{panX:r,panY:n,zoom:o}=e;t({type:T,data:{panX:r,panY:n,zoom:o}})}},rotation:{get:()=>180*r().rotation/Math.PI,set:e=>t({type:D,data:e*Math.PI/180})},srcs:{get:()=>r().orderedImages,set:r=>{if(!Array.isArray(r))throw Error(`Expected Array, received ${typeof r}`);t({type:j,data:r.map(String)}),!e.src&&r.length&&(e.index=0)}}})};const se=e=>(e^16*Math.random()>>e/4).toString(16),le=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,se),{overlays:{OVERLAYS:ce,ADD:de,UPDATE:ge,DELETE:me,selection:ue,highlights:pe}}=e,ve=e=>{if(null==e.x)throw new Error('overlays must have an "x" property');if(null==e.y)throw new Error('overlays must have an "y" property');const t=e.id||le();return Object.assign({id:t},e)};const{markers:{MARKERS:he,ADD:fe,UPDATE:we,DELETE:be}}=e,ye=e=>{const{node:t}=e;if(!(t instanceof Element))throw new Error('markers must must have a valid Element as their "node" property');const r=e.id||t.id||le();return t.id=r,t.setAttribute("inactive",""),Object.assign({id:r,node:t},e)};const{DRAWING_ENABLED:_e,FULLSCREEN:Ie,KEYBOARD_LISTEN:xe,PAN_ZOOM:Oe,ZOOM_MIN:Ee,ZOOM_MAX:Ae,PAN_DISABLED:Ne,ROTATE_DISABLED:Te,ZOOM_DISABLED:Re,ROTATE:Me,IMAGE_INFO:ke,IMAGE_INFO_ERROR:Ce,IMAGE_MSG:Le,IMAGE_CURRENT:Se,IMAGES:ze,VIEW_SIZE:De,IN_DOM:Pe,CREDENTIALS:Be,SCROLLING_PARENT:Fe,TOOLS_CONTROL:Ge,FULLSCREEN_CONTROL:je,GRID_CONTROL:$e,DOWNLOAD_CONTROL:He,DOWNLOAD_IMAGE:Ze,HIDE_ZOOM_BUTTONS:Ve,LOCALE:Ue,NAVIGATION:Ye,NAVIGATION_ARROWS:qe,NAVIGATION_RETURN_TO_ORIG:Xe}=e,{INVERT:We,BRIGHTNESS:Ke,CONTRAST:Je}=e.filters,Qe=2*Math.PI,et={panX:.5,panY:.5,zoom:1,minZoom:.9,maxZoom:50,invert:!1,brightness:1,contrast:1,locale:"en",noZoom:!1,noPan:!1,noRotate:!1,scrollingParent:!1,rotation:0,inDom:!1,viewWidth:null,viewHeight:null,listeningToKeyboard:!0,drawMode:!1,fullscreen:!1,currentImage:null,images:{},credentials:null,message:null,toolsControl:!1,fullscreenControl:!1,gridControl:!1,downloadControl:!1,downloadImage:!1,hideZoomButtons:!1,navigation:!1,navigationArrows:!1,navigationReturnToOrig:!1},tt=(e,t)=>{let{panX:r=t.panX,panY:n=t.panY,zoom:o=t.zoom}=e;return r=Math.min(Math.max(r,0),1),n=Math.min(Math.max(n,0),1),o=Math.min(Math.max(o,t.minZoom),t.maxZoom),{panX:r=isNaN(r)?t.panX:r,panY:n=isNaN(n)?t.panY:n,zoom:o=isNaN(o)?t.zoom:o}},rt=(e,t)=>{if(isNaN(e))return t;let r=e%Qe;return r<0&&(r+=Qe),r};var nt=(e=et,t)=>{if(!t)return e;const{type:r,data:n}=t,o=t=>Object.assign({},e,t),i=(e,t)=>{const r=isNaN(e)?et[t]:e;return o({[t]:r})};switch(r){case Oe:{const{panX:t,panY:r,zoom:i}=tt(n,e);return t!==e.panX||r!==e.panY||i!==e.zoom?o({panX:t,panY:r,zoom:i}):e}case Ee:{if(isNaN(n)||n>e.maxZoom)return e;const t=Number(n);return t===e.minZoom?e:o({minZoom:t,zoom:Math.max(e.zoom,t)})}case Ae:{if(isNaN(n)||n<e.minZoom)return e;const t=Number(n);return t===e.maxZoom?e:o({maxZoom:t,zoom:Math.min(e.zoom,t)})}case Re:return o({noZoom:Boolean(n)});case Ne:return o({noPan:Boolean(n)});case Te:return o({noRotate:Boolean(n)});case Fe:return o({scrollingParent:Boolean(n)});case Me:{const t=rt(n,e.rotation);return t!==e.rotation?o({rotation:t}):e}case We:return o({invert:Boolean(n)});case Ke:return i(n,"brightness");case Je:return i(n,"contrast");case Pe:return o({inDom:Boolean(n)});case De:{const{viewWidth:t,viewHeight:r}=n;return t!==e.viewWidth||r!==e.viewHeight?o({viewWidth:t,viewHeight:r}):e}case xe:{const t=Boolean(n);return e.listeningToKeyboard!==t?o({listeningToKeyboard:t}):e}case _e:{const t=Boolean(n);return e.drawMode!==t?o({drawMode:t}):e}case Ie:{const t=Boolean(n);return e.fullscreen!==t?o({fullscreen:t}):e}case Se:return e.currentImage!==n?o({currentImage:n}):e;case ke:{const{image:r}=t;return e.images[r]?e:o({images:Object.assign({},e.images,{[r]:n})})}case Ce:{const{image:r}=t;return e.images[r]?e:o({images:Object.assign({},e.images,{[r]:{error:n}})})}case Le:return o({message:n});case ze:return Array.isArray(n)?o({orderedImages:n}):e;case Be:return o({credentials:n});case Ge:return o({toolsControl:Boolean(n)});case je:return o({fullscreenControl:Boolean(n)});case $e:return o({gridControl:Boolean(n)});case He:return o({downloadControl:Boolean(n)});case Ze:return o({downloadImage:Boolean(n)});case Ve:return o({hideZoomButtons:Boolean(n)});case Ue:return o({locale:n});case Ye:return o({navigation:Boolean(n)});case qe:return o({navigationArrows:Boolean(n)});case Xe:return o({navigationReturnToOrig:Boolean(n)});default:return e}};const ot=(e,t)=>t>e?[e,t-e]:[t,e-t],it=(e,t)=>{const[r,n]=ot(e.imgX,t.imgX),[o,i]=ot(e.imgY,t.imgY);return{x:r,y:o,width:n,height:i}},at=(e,t,r)=>Math.min(Math.max(e,t),r),st=e=>(t,r)=>null==r?[at(t,0,1),r]:e(t,r),lt=st((e,t)=>{const r=at(t,.005,1);return[at(e,0,1-r),r]}),ct=st((e,t)=>{const r=at(e,0,e+t-.005);return[r,t+e-r]}),dt=st((e,t)=>[e,at(t,.005,1-e)]),gt=(e,t)=>r=>{const[n,o]=e(r.x,r.width),[i,a]=t(r.y,r.height);return Object.assign({},r,{x:n,y:i,width:o,height:a})},mt=gt(lt,lt),{OVERLAYS:ut,ADD:pt,UPDATE:vt,DELETE:ht}=e.overlays,{OBJECT:ft}=v,wt={overlays:ft};var bt=(e=wt,t)=>{if(!t)return e;const{data:r}=t,n=t=>Object.assign({},e,t);switch(t.type){case ut:{let e={},t=!1;r.forEach(r=>{const{id:n}=r;n?e[n]?console.error(`Duplicate ID found when adding overlays: ${n}. Dropping duplicate`):(t=!0,e[n]=mt(r)):console.error("Overlay was missing an ID property. Dropping.")}),t||(e=ft);const o={overlays:e};return e===ft&&(o.currentHoveredOverlay=null),n(o)}case pt:{const{id:t}=r;if(!t)return console.error("Overlay was missing an ID property. Ignoring."),e;if(e.overlays[t])return console.error(`Duplicate ID found when adding overlays: ${t}. Ignoring duplicate`),e;const o=mt(r);return n({overlays:Object.assign({},e.overlays,{[t]:o})})}case vt:{const{id:t}=r;if(!e.overlays[t])return console.error(`Attempted to update a non-existent overlay with ID of ${t}.`),e;const o=mt(Object.assign({},e.overlays[t],r));return n({overlays:Object.assign({},e.overlays,{[t]:o})})}case ht:{if(!e.overlays[r])return e;const t=Object.assign({},e.overlays);if(delete t[r],Object.keys(t).length)return n({overlays:t});const o={overlays:ft};return r===e.currentHoveredOverlay&&(o.currentHoveredOverlay=null),n(o)}default:return e}};const{OBJECT:yt}=v;var _t=(e,{ADD:t,REMOVE:r,DELETE:n,CLEAR:o},i,a="__NOTHING__")=>{const s={[e]:yt};return(l=s,c)=>{if(!c)return l;let{data:d}=c;const g=e=>Object.assign({},l,e);switch(c.type){case t:return"string"==typeof d&&(d=[d]),Array.isArray(d)?g({[e]:Object.assign({},l[e],d.reduce((e,t)=>(e[t]=!0,e),{}))}):l;case a:case n:case r:{if("string"==typeof d&&(d=[d]),!Array.isArray(d)||l[e]===yt)return l;let t=Object.assign({},l[e]);return Array.isArray(d)?d.forEach(e=>delete t[e]):delete t[d],Object.keys(t).length||(t=yt),g({[e]:t})}case i:case o:return g({[e]:yt});default:return l}}};const{highlights:It,OVERLAYS:xt,DELETE:Ot}=e.overlays;var Et=_t("highlightedOverlays",It,xt,Ot);const{selection:At,OVERLAYS:Nt,DELETE:Tt}=e.overlays;var Rt=_t("selectedOverlays",At,Nt,Tt);const{markers:{MARKERS:Mt,ADD:kt,UPDATE:Ct,DELETE:Lt}}=e,{OBJECT:St}=v,zt={markers:St};var Dt=(e=zt,t)=>{if(!t)return e;const{data:r}=t,n=t=>Object.assign({},e,{markers:t});switch(t.type){case Mt:{let e={},t=!1;return r.forEach(r=>{const{id:n}=r;n?e[n]?console.error(`Duplicate ID found when adding markermarkers: ${n}. Dropping duplicate`):(t=!0,e[n]=Object.assign({},r)):console.error("Marker was missing an ID property. Dropping.")}),t||(e=St),n(e)}case kt:{const{id:t}=r;if(!t)return console.error("Marker was missing an ID property. Ignoring."),e;if(e.markers[t])return console.error(`Attempted to add a marker using an already-existing ID of${t}.`),e;const o=Object.assign({},r,{id:t});return n(Object.assign({},e.markers,{[t]:o}))}case Ct:{const{id:t}=r;if(!e.markers[t])return console.error(`Attempted to update a non-existent marker with ID of ${t}.`),e;const o=Object.assign({},e.markers[t],r);return n(Object.assign({},e.markers,{[t]:o}))}case Lt:{if(!e.markers[r])return e;const t=Object.assign({},e.markers);return delete t[r],Object.keys(t).length?n(t):n(St)}default:return e}};const{POINT_DOWN:Pt,POINT_UP:Bt,POINT_MOVE:Ft}=e.user,Gt=e.overlays.DELETE,{PANNING:jt,RESIZING:$t,MOVING:Ht,DRAWING:Zt}=h,{OBJECT:Vt}=v,Ut=Math.PI/2,Yt=Math.PI/32,qt={startPoint:null,currentPoint:null,behavior:null,currentHoveredOverlay:null,currentHandle:null},Xt=(e,t,r,n,o)=>{o?(e[r]+=t,e[n]-=t):e[n]+=t};var Wt=(e=qt,t)=>{if(!t)return e;const{type:r,data:n}=t,o=(...t)=>Object.assign({},e,...t),{startPoint:i,currentPoint:a,overlays:s,gridMode:l,noPan:c}=e;switch(r){case Pt:{const{id:t}=n;let{currentHandle:r}=e;return t&&"__overlay-resize-handle"===t.substr(0,"__overlay-resize-handle".length)&&(r=t),o({startPoint:n,currentHandle:r})}case Bt:{if(!i)return e;const{behavior:t,dragHappened:r}=e;let{selectedOverlays:n,rotation:a,currentImage:d}=e;if(r){if(t===jt&&!c){const t=e.rotation%Ut;(t<Yt||t>Ut-Yt)&&(a=Math.round(e.rotation/Ut)*Ut)}}else{const{id:e,src:t}=i;l&&t?d=t:n=e&&s[e]&&s[e].selectable?{[e]:!0}:Vt}return o({startPoint:null,currentPoint:null,currentHandle:null,behavior:null,dragHappened:!1,selectedOverlays:n,rotation:a,currentImage:d})}case Gt:return n===e.currentHoveredOverlay?o({currentHoveredOverlay:null}):e;case Ft:{if(!i&&!l){const t=e.currentHoveredOverlay;let{id:r}=n;return e.overlays[r]||(r=null),t===r?e:o({currentHoveredOverlay:r})}if(l)return e;const t=a||i,r={x:n.imgX-t.imgX,y:n.imgY-t.imgY},d=1===n.buttonDown&&!e.currentHoveredOverlay,g=i&&i.id||n.id,{selectedOverlays:m,currentHandle:u,drawMode:p}=e;let{behavior:v}=e;v||(u?v=$t:g&&m[g]?v=Ht:p?v=Zt:(d||n.gesture)&&(v=jt));const h={currentPoint:n,dragHappened:d,behavior:v};switch(v){case Ht:{const e=Object.assign({},s);return Object.keys(m).forEach(t=>{const n=Object.assign({},s[t]);n.x+=r.x,n.y+=r.y,e[t]=mt(n)}),h.overlays=e,o(h)}case Zt:return o(h);case $t:{const e=Object.assign({},s);return Object.keys(m).forEach(t=>{const n=Object.assign({},s[t]),o=Boolean(u.match("LEFT")),i=Boolean(u.match("TOP"));Xt(n,r.x,"x","width",o),Xt(n,r.y,"y","height",i),e[t]=((e,t,r)=>{return gt(r?ct:dt,t?ct:dt)(e)})(n,i,o)}),h.overlays=e,o(h)}case jt:{const i=Object.assign({},n),{noZoom:a,noRotate:s}=e;c&&(r.x=0,r.y=0),i.imgX=t.imgX,i.imgY=t.imgY,h.currentPoint=i;const l={panX:e.panX-r.x,panY:e.panY-r.y};if(n.distance&&!a){const r=n.distance/t.distance;l.zoom=e.zoom*r}if(n.rotation&&!s){const r=n.rotation-t.rotation;h.rotation=rt(e.rotation+r,e.rotation)}return o(h,tt(l,e))}default:return e}}default:return e}};const Kt=Object.prototype.hasOwnProperty;function Jt(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}const Qt=new Set,er=()=>{Qt.forEach(e=>e()),Qt.size&&requestAnimationFrame(()=>er())};var tr=e=>{const t=[];let r=null;const n=()=>{const n=e();if(r!==n){const e=r;r=n,t.forEach(t=>{const{selector:n,onUpdate:o,state:i,isEqual:a}=t,s=n(r,e);a(i,s)||(t.state=s,o(s))})}};n(),(e=>{Qt.add(e),1===Qt.size&&er()})(n);const o=(e,n,o=((e,t)=>{if(Jt(e,t))return!0;if(function(e,t){return"object"!=typeof e||null===e||"object"!=typeof t||null===t}(e,t))return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n++)if(!Kt.call(t,r[n])||!Jt(e[r[n]],t[r[n]]))return!1;return!0}))=>{const i=e(r,r);n(i),t.push({selector:e,onUpdate:n,state:i,isEqual:o})};return o.clear=(()=>(e=>Qt.delete(e))(n)),o};function rr(e,...t){const r=t.reduce((t,r,n)=>t+r+e[n+1],e[0]),n=document.createElement("div");return n.innerHTML=r,n.firstElementChild}const nr=rr`<style component="fs-single-image-viewer">
fs-single-image-viewer {
  --color-place: #FCB34B;
  --color-date: #27C4F4;
  --color-generic: #F16458;
  --color-name: #87B940;
  --handle-size: 18px;
  --handle-color: var(--color-name);
  --thickness: 3px;
  display: block;
  position: relative;
  background: #888;
  flex-grow: 1;
  user-select: none;
  -ms-user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
}

fs-single-image-viewer > * {
  overflow: hidden;
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

/* make the handles big on mobile devices */
@media screen and (pointer: coarse) {
  fs-single-image-viewer {
    --handle-size: 34px;
  }
}

fs-single-image-viewer *[inactive] {
  opacity: 0;
  pointer-events: none !important;
}

fs-single-image-viewer[draw-mode] {
  cursor: crosshair;
}

fs-single-image-viewer[draw-mode] *:not([interactive]), {
  pointer-events: none !important;
}

.fs-image-viewer__stage {
  position: absolute;
  transform-origin: top left;
}

.fs-image-viewer__stage > * {
  box-sizing: border-box;
}

.fs-image-viewer__level {
  width: 100%;
  height: 100%;
}

.fs-image-viewer__stage img {
  display: block;
  position: absolute;
}

.fs-image-viewer__image,
.fs-image-viewer__overlays {
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;
}

.fs-image-viewer__markers {
  overflow: initial;
}

.fs-image-viewer__markers > *,
.fs-image-viewer__overlays > * {
  position: absolute;
  transition: opacity 0.5s;
}

fs-single-image-viewer *[interactive],
.fs-image-viewer__overlays > * {
  pointer-events: auto;
}


.fs-image-viewer__drag-rectangle {
  position: absolute;
  top: 0;
  left: 0;
  border: 1px solid rgba(75, 150, 75, 0.5);
  background: rgba(75, 150, 75, 0.25);
}

.fs-image-viewer__overlay {
  cursor: pointer;
  z-index: 1;
  opacity: 0.15;
}

.fs-image-viewer__overlay[type] {
  background: var(--color-generic);
}

.fs-image-viewer__overlay[type="name"] {
  background: var(--color-name);
}

.fs-image-viewer__overlay[type="place"] {
  background: var(--color-place);
}

.fs-image-viewer__overlay[type="date"] {
  background: var(--color-date);
}

.fs-image-viewer__overlay[selected] {
  z-index: 5;
  background: transparent;
  cursor: move;
}

.fs-image-viewer__overlay-rects > * {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  border-radius: calc(var(--thickness)/2);
  box-shadow: 0 0 0 var(--thickness) #fff,
              calc(var(--thickness)/2) calc(var(--thickness)/2) calc(var(--thickness)*2) var(--thickness) rgba(0,0,0,0.45);
  transition: opacity 0.5s;
}

.fs-image-viewer__overlay-mask {
  opacity: 0.25;
  width: 100%;
  height: 100%;
  transition: opacity 0.3s;
  position: absolute;
}

.fs-image-viewer__overlay-mask > * {
  background: #000;
  position: absolute;
}

.fs-image-viewer__overlay-handles {
  overflow: initial;
  position: absolute;
}

.fs-image-viewer__overlay-handles > * {
  position: absolute;
  border-radius: 100%;
  box-sizing: border-box;
  width: var(--handle-size);
  height: var(--handle-size);
  background-color: var(--handle-color, var(--color-name));
  border: 2px solid #fff;
  box-shadow: 2px 2px 2px rgba(0,0,0,0.5);
  top: calc(-.5 * var(--handle-size));
  left: calc(-.5 * var(--handle-size));
  cursor: nesw-resize;
  pointer-events: auto;
  transition: opacity 0.5s;
}

.fs-image-viewer__overlay-handles > *:nth-child(2n) {
  cursor: nwse-resize;
}

.fs-image-viewer__overlay-handles > *:not(:last-child) {
  display: none;
}

*[all-the-handles] .fs-image-viewer__overlay-handles > * {
  display: block;
}

.fs-image-viewer__message {
  position: absolute;
  top: 20px;
  left: 70px;
  width: calc(100% - 90px);
  box-sizing: border-box;
  display: flex;
  justify-content: center;
}

.fs-image-viewer__navigation ~ .fs-image-viewer__message {
  top: 53px;
}

.fs-image-viewer__message .fs-alert {
  flex-basis: 500px;
  box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.25);
}
</style>`,or={de:{closeAlert:"",errUnknown:"Aufnahme derzeit nicht verfügbar (unbekannter Fehler).",errBadRequest:"Aufnahme derzeit nicht verfügbar (unzulässige Anforderung).",errInsufficientPermissions:"Aufnahme derzeit nicht verfügbar (unzureichende Rechte).",errForbidden:"Aufnahme derzeit nicht verfügbar (verboten).",errNotFound:"Aufnahme derzeit nicht verfügbar (nicht gefunden).",errMethodNotAllowed:"Aufnahme derzeit nicht verfügbar (Methode nicht erlaubt).",errNotAcceptable:"Aufnahme derzeit nicht verfügbar (unzulässig).",errRequestTimeout:"Aufnahme derzeit nicht verfügbar (Zeitüberschreitung der Anforderung).",errInternalServerError:"Aufnahme derzeit nicht verfügbar (interner Serverfehler).",errNotImplemented:"Aufnahme derzeit nicht verfügbar (nicht implementiert).",errBadGateway:"Aufnahme derzeit nicht verfügbar (ungültiges Gateway).",errServiceUnavailable:"Aufnahme derzeit nicht verfügbar (Dienst nicht verfügbar).",errGatewayTimeout:"Aufnahme derzeit nicht verfügbar (Gateway-Zeitüberschreitung)."},en:{closeAlert:"Close Alert",errUnknown:"Image currently unavailable (Unknown Error).",errBadRequest:"Image currently unavailable (Bad Request).",errInsufficientPermissions:"Image currently unavailable (Insufficient permissions).",errForbidden:"Image currently unavailable (Forbidden).",errNotFound:"Image currently unavailable (Not found).",errMethodNotAllowed:"Image currently unavailable (Method not Allowed).",errNotAcceptable:"Image currently unavailable (Not acceptable).",errRequestTimeout:"Image currently unavailable (Request Timeout).",errInternalServerError:"Image currently unavailable (Internal Server error).",errNotImplemented:"Image currently unavailable (Not implemented).",errBadGateway:"Image currently unavailable (Bad Gateway).",errServiceUnavailable:"Image currently unavailable (Service Unavailable).",errGatewayTimeout:"Image currently unavailable (Gateway Timeout)."},es:{closeAlert:"",errUnknown:"Imagen no disponible en este momento (Error desconocido).",errBadRequest:"Imagen no disponible en este momento (Solicitud incorrecta).",errInsufficientPermissions:"Imagen no disponible en este momento (Permisos insuficientes).",errForbidden:"Imagen no disponible en este momento (Prohibido).",errNotFound:"Imagen no disponible en este momento (No se encontró).",errMethodNotAllowed:"Imagen no disponible en este momento (Método no permitido).",errNotAcceptable:"Imagen no disponible en este momento (No aceptable).",errRequestTimeout:"Imagen no disponible en este momento (Se agotó el tiempo de espera de la solicitud).",errInternalServerError:"Imagen no disponible en este momento (Error interno del servidor).",errNotImplemented:"Imagen no disponible en este momento (No implementado).",errBadGateway:"Imagen no disponible en este momento (Puerta de enlace incorrecta).",errServiceUnavailable:"Imagen no disponible en este momento (Servicio no disponible).",errGatewayTimeout:"Imagen no disponible en este momento (Se agotó el tiempo de espera de la puerta de enlace)."},eo:{closeAlert:"",errUnknown:"[Image currently uñavailable (Uñknowñ Errör).----------]",errBadRequest:"[Image currently uñavailable (Bad Request).----------]",errInsufficientPermissions:"[Image currently uñavailable (Iñsufficient permissiöñs).----------]",errForbidden:"[Image currently uñavailable (Förbiddeñ).----------]",errNotFound:"[Image currently uñavailable (Nöt found).----------]",errMethodNotAllowed:"[Image currently uñavailable (Methöd not Allowed).----------]",errNotAcceptable:"[Image currently uñavailable (Nöt acceptable).----------]",errRequestTimeout:"[Image currently uñavailable (Request Timeout).----------]",errInternalServerError:"[Image currently uñavailable (Iñterñal Server errör).----------]",errNotImplemented:"[Image currently uñavailable (Not implemeñted).----------]",errBadGateway:"[Image currently uñavailable (Bad Gateway).----------]",errServiceUnavailable:"[Image currently uñavailable (Service Uñavailable).----------]",errGatewayTimeout:"[Image currently uñavailable (Gateway Timeöut).----------]"},fr:{closeAlert:"",errUnknown:"Image actuellement indisponible (Erreur inconnue).",errBadRequest:"Image actuellement indisponible (Mauvaise demande).",errInsufficientPermissions:"Image actuellement indisponible (Autorisations insuffisantes).",errForbidden:"Image actuellement indisponible (Interdit).",errNotFound:"Image actuellement indisponible (Non trouvé(e)).",errMethodNotAllowed:"Image actuellement indisponible (Méthode non autorisée).",errNotAcceptable:"Image actuellement indisponible (Inacceptable).",errRequestTimeout:"Image actuellement indisponible (Expiration de la demande).",errInternalServerError:"Image actuellement indisponible (Erreur interne du serveur).",errNotImplemented:"Image actuellement indisponible (Non mis en service).",errBadGateway:"Image actuellement indisponible (Mauvaise passerelle).",errServiceUnavailable:"Image actuellement indisponible (Service non disponible).",errGatewayTimeout:"Image actuellement indisponible (Expiration de la passerelle)."},it:{closeAlert:"",errUnknown:"Immagine al momento non disponibile (Errore sconosciuto).",errBadRequest:"Immagine al momento non disponibile (Richiesta non valida).",errInsufficientPermissions:"Immagine al momento non disponibile (Autorizzazioni insufficienti).",errForbidden:"Immagine al momento non disponibile (Proibita).",errNotFound:"Immagine al momento non disponibile (Non trovata).",errMethodNotAllowed:"Immagine al momento non disponibile (Metodo non consentito).",errNotAcceptable:"Immagine al momento non disponibile (Non accettabile).",errRequestTimeout:"Immagine al momento non disponibile (Richiesta scaduta).",errInternalServerError:"Immagine al momento non disponibile (Errore interno del server).",errNotImplemented:"Immagine al momento non disponibile (Non implementata).",errBadGateway:"Immagine al momento non disponibile (Gateway non valido).",errServiceUnavailable:"Immagine al momento non disponibile (Servizio non disponibile).",errGatewayTimeout:"Immagine al momento non disponibile (Gateway scaduto)."},ja:{closeAlert:"",errUnknown:"画像は現在利用できません (不明なエラー).",errBadRequest:"画像は現在利用できません (無効な要求).",errInsufficientPermissions:"画像は現在利用できません (権限がありません).",errForbidden:"画像は現在利用できません (禁止されています).",errNotFound:"画像は現在利用できません (見つかりませんでした).",errMethodNotAllowed:"画像は現在利用できません (許可されていないメソッド).",errNotAcceptable:"画像は現在利用できません (受け付けられません).",errRequestTimeout:"画像は現在利用できません (要求がタイムアウトしました).",errInternalServerError:"画像は現在利用できません (内部サーバーエラー).",errNotImplemented:"画像は現在利用できません (実装されていません).",errBadGateway:"画像は現在利用できません (無効なゲートウェイです).",errServiceUnavailable:"画像は現在利用できません (サービスは利用できません).",errGatewayTimeout:"画像は現在利用できません (ゲートウェイがタイムアウトしました)."},ko:{closeAlert:"",errUnknown:"현재 이용할 수 없는 이미지 (알 수 없는 오류).",errBadRequest:"현재 이용할 수 없는 이미지 (유효하지 않은 요청).",errInsufficientPermissions:"현재 이용할 수 없는 이미지 (권한 불충분).",errForbidden:"현재 이용할 수 없는 이미지 (금지됨).",errNotFound:"현재 이용할 수 없는 이미지 (찾을 수 없음).",errMethodNotAllowed:"현재 이용할 수 없는 이미지 (허가되지 않은 방식).",errNotAcceptable:"현재 이용할 수 없는 이미지 (수용 불가).",errRequestTimeout:"현재 이용할 수 없는 이미지 (요청 시간 초과).",errInternalServerError:"현재 이용할 수 없는 이미지 (내부 서버 오류).",errNotImplemented:"현재 이용할 수 없는 이미지 (구현되지 않음).",errBadGateway:"현재 이용할 수 없는 이미지 (잘못된 게이트웨이).",errServiceUnavailable:"현재 이용할 수 없는 이미지 (서비스를 사용할 수 없음).",errGatewayTimeout:"현재 이용할 수 없는 이미지 (게이트웨이 시간 초과)."},pt:{closeAlert:"",errUnknown:"Imagem indisponível no momento (Erro desconhecido).",errBadRequest:"Imagem indisponível no momento (Solicitação não atendida).",errInsufficientPermissions:"Imagem indisponível no momento (Permissões insuficientes).",errForbidden:"Imagem indisponível no momento (Proibido).",errNotFound:"Imagem indisponível no momento (Não encontrado).",errMethodNotAllowed:"Imagem indisponível no momento (Método não permitido).",errNotAcceptable:"Imagem indisponível no momento (Inaceitável).",errRequestTimeout:"Imagem indisponível no momento (O pedido expirou).",errInternalServerError:"Imagem indisponível no momento (Erro interno do servidor).",errNotImplemented:"Imagem indisponível no momento (Não implementado).",errBadGateway:"Imagem indisponível no momento (Gateway inválido).",errServiceUnavailable:"Imagem indisponível no momento (Serviço indisponível).",errGatewayTimeout:"Imagem indisponível no momento (Gateway expirou)."},ru:{closeAlert:"",errUnknown:"В настоящий момент снимок недоступен (Неизвестная ошибка).",errBadRequest:"В настоящий момент снимок недоступен (Неверный запрос).",errInsufficientPermissions:"В настоящий момент снимок недоступен (Недостаточно прав).",errForbidden:"В настоящий момент снимок недоступен (Запрещено).",errNotFound:"В настоящий момент снимок недоступен (Не найдено).",errMethodNotAllowed:"В настоящий момент снимок недоступен (Метод запрещен).",errNotAcceptable:"В настоящий момент снимок недоступен (Не приемлемо).",errRequestTimeout:"В настоящий момент снимок недоступен (Время запроса истекло).",errInternalServerError:"В настоящий момент снимок недоступен (Внутренняя ошибка сервера).",errNotImplemented:"В настоящий момент снимок недоступен (Не осуществлено).",errBadGateway:"В настоящий момент снимок недоступен (Ошибка шлюза).",errServiceUnavailable:"В настоящий момент снимок недоступен (Сервис недоступен).",errGatewayTimeout:"В настоящий момент снимок недоступен (Время шлюза истекло)."},zh:{closeAlert:"",errUnknown:"影像目前無法取得 (錯誤不詳).",errBadRequest:"影像目前無法取得 (錯誤的請求).",errInsufficientPermissions:"影像目前無法取得 (權限不足).",errForbidden:"影像目前無法取得 (禁止使用).",errNotFound:"影像目前無法取得 (找不到).",errMethodNotAllowed:"影像目前無法取得 (方法未受允許).",errNotAcceptable:"影像目前無法取得 (不可接受).",errRequestTimeout:"影像目前無法取得 (要求逾時).",errInternalServerError:"影像目前無法取得 (內部伺服器錯誤).",errNotImplemented:"影像目前無法取得 (未執行).",errBadGateway:"影像目前無法取得 (閘道錯誤).",errServiceUnavailable:"影像目前無法取得 (無法使用此服務).",errGatewayTimeout:"影像目前無法取得 (閘道逾時)."}};var ir=(e,t)=>{let r;"function"==typeof e.getRootNode&&(r=e.getRootNode())!==document&&r!==e||(r=document.head);const n=`style[component="${t.getAttribute("component")}"]`;r.querySelector(n)||r.insertBefore(t.cloneNode(!0),r.firstChild)};const ar=(e,t)=>t.map(t=>e.querySelector(t)),sr={de:{brightness:"Helligkeit",contrast:"Kontrast",apply:"Übernehmen",cancel:"Abbrechen",zoomIn:"Vergrößern",zoomOut:"Verkleinern",tools:"Hilfsmittel",rotateLeft:"Nach links drehen",rotateRight:"Nach rechts drehen",invert:"Umkehren",adjustImage:"Aufnahme anpassen",enterFullscreen:"Vollbildmodus starten",exitFullscreen:"Vollbildmodus beenden",single:"Einzelne Aufnahme ansehen",tiles:"Mehrere Aufnahmen ansehen",decreaseBrightness:"Helligkeit verringern",increaseBrightness:"Helligkeit erhöhen",decreaseContrast:"Kontrast verringern",increaseContrast:"Kontrast erhöhen",download:"Herunterladen"},en:{brightness:"Brightness",contrast:"Contrast",apply:"Apply",cancel:"Cancel",zoomIn:"Zoom in",zoomOut:"Zoom out",tools:"Tools",rotateLeft:"Rotate left",rotateRight:"Rotate Right",invert:"Invert",adjustImage:"Adjust Image",enterFullscreen:"Enter Fullscreen",exitFullscreen:"Exit Fullscreen",single:"View Single Image",tiles:"View Multiple Images",decreaseBrightness:"Decrease Brightness",increaseBrightness:"Increase Brightness",decreaseContrast:"Decrease Contrast",increaseContrast:"Increase Contrast",download:"Download"},es:{brightness:"Brillo",contrast:"Contraste",apply:"Aplicar",cancel:"Cancelar",zoomIn:"Ampliar",zoomOut:"Reducir",tools:"Herramientas",rotateLeft:"Girar a la izquierda",rotateRight:"Girar a la derecha",invert:"Invertir",adjustImage:"Ajustar imagen",enterFullscreen:"Ingresar a pantalla completa",exitFullscreen:"Salir de pantalla completa",single:"Ver una sola imagen",tiles:"Ver varias imágenes",decreaseBrightness:"Disminuir el brillo",increaseBrightness:"Aumentar el brillo",decreaseContrast:"Disminuir el contraste",increaseContrast:"Aumentar el contraste",download:"Descargar"},eo:{brightness:"[Brightness------]",contrast:"[Contrast----------]",apply:"[Apply-------------]",cancel:"[Cancel----------]",zoomIn:"[Žööɱ Îñ------- П國カ내]",zoomOut:"[Žööɱ Öûţ--------- П國カ내]",tools:"[Tools----------]",rotateLeft:"[Rotate left---------]",rotateRight:"[Rotate Right---------]",invert:"[Invert------------]",adjustImage:"[Adjust Image----------]",enterFullscreen:"[Enter Fullscreen---------]",exitFullscreen:"[Exit Fullscreen-----------]",single:"[View Single Image-------]",tiles:"[View Multiple Images-------]",decreaseBrightness:"[Decrease Brightness------]",increaseBrightness:"[Increase Brightness------]",decreaseContrast:"[Decrease Contrast------]",increaseContrast:"[Increase Contrast------]",download:"[Download------]"},fr:{brightness:"Luminosité",contrast:"Contraste",apply:"Appliquer",cancel:"Annuler",zoomIn:"Zoom avant",zoomOut:"Zoom arrière",tools:"Outils",rotateLeft:"Rotation à gauche",rotateRight:"Rotation à droite",invert:"Inverser",adjustImage:"Régler l’image",enterFullscreen:"Entrer dans le mode «¬Plein écran¬»",exitFullscreen:"Sortir du mode «¬Plein écran¬»",single:"Afficher une seule image",tiles:"Afficher plusieurs images",decreaseBrightness:"Réduire la luminosité",increaseBrightness:"Augmenter la luminosité",decreaseContrast:"Réduire le contraste",increaseContrast:"Augmenter le contraste",download:"Télécharger"},it:{brightness:"Luminosità",contrast:"Contrasto",apply:"Applica",cancel:"Annulla",zoomIn:"Ingrandisci",zoomOut:"Rimpicciolisci",tools:"Strumenti",rotateLeft:"Ruota a sinistra",rotateRight:"Ruota a destra",invert:"Inverti",adjustImage:"Regola immagine",enterFullscreen:"Vedi a schermo intero",exitFullscreen:"Esci da schermo intero",single:"Visualizza immagine singola",tiles:"Visualizza immagini multiple",decreaseBrightness:"Diminuisci luminosità",increaseBrightness:"Aumenta la luminosità",decreaseContrast:"Diminuisci contrasto",increaseContrast:"Aumenta contrasto",download:"Scarica"},ja:{brightness:"明度",contrast:"コントラスト",apply:"適応",cancel:"キャンセル",zoomIn:"拡大",zoomOut:"縮小",tools:"ツール",rotateLeft:"左に回転する",rotateRight:"右に回転する",invert:"反転",adjustImage:"画像の調整",enterFullscreen:"全画面表示にする",exitFullscreen:"全画面表示を終了する",single:"1枚の画像を表示する",tiles:"複数の画像を表示する",decreaseBrightness:"明度を下げる",increaseBrightness:"明度を上げる",decreaseContrast:"明暗の差を小さくする",increaseContrast:"明暗の差を大きくする",download:"ダウンロード"},ko:{brightness:"밝기",contrast:"대비",apply:"적용",cancel:"취소",zoomIn:"화면 확대",zoomOut:"화면 축소",tools:"도구",rotateLeft:"왼쪽으로 회전",rotateRight:"오른쪽으로 회전",invert:"방향 전환",adjustImage:"이미지 조절",enterFullscreen:"전체화면 보기",exitFullscreen:"전체화면 종료",single:"해당 이미지만 보기",tiles:"여러 이미지 보기",decreaseBrightness:"밝기 감소",increaseBrightness:"밝기 증가",decreaseContrast:"채도 감소",increaseContrast:"채도 증가",download:"다운로드"},pt:{brightness:"Brilho",contrast:"Contraste",apply:"Aplicar",cancel:"Cancelar",zoomIn:"Aproximar",zoomOut:"Afastar",tools:"Ferramentas",rotateLeft:"Girar para a esquerda",rotateRight:"Girar para a direita",invert:"Inverter",adjustImage:"Ajuste de Imagem",enterFullscreen:"Tela cheia",exitFullscreen:"Sair da tela cheia",single:"Visualizar apenas uma imagem",tiles:"Visualizar várias imagens",decreaseBrightness:"Diminuir o brilho",increaseBrightness:"Aumentar o brilho",decreaseContrast:"Diminuir contraste",increaseContrast:"Aumentar o contraste",download:"Baixar"},ru:{brightness:"Яркость",contrast:"Контраст",apply:"Применить",cancel:"Отменить",zoomIn:"Приблизить",zoomOut:"Отдалить",tools:"Инструменты",rotateLeft:"Повернуть влево",rotateRight:"Повернуть вправо",invert:"Инвертировать",adjustImage:"Обработать снимок",enterFullscreen:"Полноэкранный режим",exitFullscreen:"Выход из полноэкранного режима",single:"Просмотреть один снимок",tiles:"Просмотреть несколько снимков",decreaseBrightness:"Уменьшить яркость",increaseBrightness:"Увеличить яркость",decreaseContrast:"Уменьшить контрастность",increaseContrast:"Увеличить контрастность",download:"Скачать"},zh:{brightness:"亮度",contrast:"對比",apply:"套用",cancel:"取消",zoomIn:"放大",zoomOut:"縮小",tools:"工具",rotateLeft:"向左旋轉",rotateRight:"向右旋轉",invert:"反轉",adjustImage:"調整影像",enterFullscreen:"進入全螢幕",exitFullscreen:"結束全螢幕",single:"檢視單張影像",tiles:"檢視多張影像",decreaseBrightness:"降低亮度",increaseBrightness:"增加亮度",decreaseContrast:"降低對比",increaseContrast:"增加對比",download:"下載"}},lr=/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"Cmd":"Ctrl";var cr=(e,t)=>{const r=rr`
  <div class="fs-image-viewer__adjustments" interactive>
    <label>${sr[t].brightness}</label>
    <div class="fs-image-viewer__slider" type="brightness">
      <button class="fs-image-viewer__brightness-less" type="less">
        <div class="fs-image-viewer-slider__tooltip">${sr[t].decreaseBrightness} (${lr} + J)</div>
      </button>
      <input type="range" step="any" min="0" max="2"/>
      <button class="fs-image-viewer__brightness-more" type="more">
        <div class="fs-image-viewer-slider__tooltip">${sr[t].increaseBrightness} (${lr} + K)</div>
      </button>
    </div>
    <label>${sr[t].contrast}</label>
    <div class="fs-image-viewer__slider" type="contrast">
      <button class="fs-image-viewer__contrast-less" type="less">
        <div class="fs-image-viewer-slider__tooltip">${sr[t].decreaseContrast} (${lr} + Shift + J)</div>
      </button>
      <input type="range" step="any" min="0" max="2"/>
      <button class="fs-image-viewer__contrast-more" type="more">
        <div class="fs-image-viewer-slider__tooltip">${sr[t].increaseContrast} (${lr} + Shift + K)</div>
      </button>
    </div>
    <div class="fs-image-viewer__adjust-buttons">
      <button type="apply">${sr[t].apply}</button>
      <button type="cancel">${sr[t].cancel}</button>
    </div>
  </div>
`,n={brightness:e.brightness,contrast:e.contrast},o=e.querySelector(".fs-image-viewer__adjustments");o&&o.remove();const i=r.cloneNode(!0);return i.querySelectorAll(".fs-image-viewer__slider").forEach(t=>{const r=t.querySelector("input"),o=t.querySelector('[type="less"]'),i=t.querySelector('[type="more"]'),a=t.getAttribute("type");r.value=e[a],r.cancel=(()=>{r.value=n[a]}),r.oninput=(()=>{e[a]=r.value}),o.onclick=(()=>{r.value=Number(r.value)-.3,e[a]=r.value}),i.onclick=(()=>{r.value=Number(r.value)+.3,e[a]=r.value})}),i.querySelector('[type="apply"]').onclick=(()=>{n.brightness=e.brightness,n.contrast=e.contrast,i.remove()}),i.querySelector('[type="cancel"]').onclick=(()=>{i.querySelectorAll("input").forEach(e=>e.cancel()),e.brightness=n.brightness,e.contrast=n.contrast,i.remove()}),e.appendChild(i)};const dr=rr`<style component="fs-image-viewer-control">
.fs-image-viewer__controls {
  pointer-events: auto;
  cursor: pointer;
  top: 10px;
  left: 10px;
  z-index: 100;
  opacity: .7;
  width: 38px;
  display: flex;
  flex-direction: column;
  position: absolute;
}

.fs-image-viewer__navigation ~ .fs-image-viewer__controls{
  top: 53px;
}

fs-image-viewer-control > .fs-image-viewer__controls {
  pointer-events: none;
  opacity: 0;
  top: 0;
  left: 45px;
}

fs-image-viewer-control[open] > .fs-image-viewer__controls {
  pointer-events: auto;
  opacity: 1;
}

fs-image-viewer-control {
  position: relative;
  background-position: center;
  background-repeat: no-repeat;
  height: 35px;
  background-color: #000;
  border-left: 1px solid #000;
  border-right: 1px solid #000;
  transition: background-color .35s;
}

fs-image-viewer-control[open], fs-image-viewer-control:hover {
  background-color: #777;
}

fs-image-viewer-control:first-of-type {
  border-top: 1px solid #000;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
}

fs-image-viewer-control:last-of-type {
  border-bottom: 1px solid #000;
  border-bottom-left-radius: 4px;
  border-bottom-right-radius: 4px;
}

fs-image-viewer-control.zoom-in {
  background-image: url('data:image/svg+xml,<svg viewBox="0 0 38 35" xmlns="http://www.w3.org/2000/svg"><path d="M19.5 11v14M26.5 18h-14" stroke="white" stroke-width="4"/></svg>');
}

fs-image-viewer-control.zoom-out {
  background-image: url('data:image/svg+xml,<svg viewBox="0 0 38 35" xmlns="http://www.w3.org/2000/svg"><path d="M26.5 18h-14" stroke="white" stroke-width="4"/></svg>');
}

fs-image-viewer-control.tools {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="23" height="17"><path fill="white" d="M20.8 15.9c-.3.6-1.1 1.1-1.7 1.1H3.9c-.6 0-1.4-.5-1.7-1.1a17.7 17.7 0 0 1 0-14.6C2.5.7 3.3 0 3.9 0h15.2c.6 0 1.4.7 1.7 1.3 2.1 4.6 2.1 9.9 0 14.6z"/><path fill="none" stroke="black" stroke-width="2.2" stroke-linecap="round" d="M4.6 5h1.6m6 0h6.3M9.1 2.9c-1.4 0-2.6.9-2.6 2.1s1.2 2.1 2.6 2.1 2.6-.9 2.6-2.1-1.2-2.1-2.6-2.1zm9.3 9.1h-1.7m-5.9 0H4.4m9.5 2.1c1.4 0 2.6-.9 2.6-2.1s-1.2-2.1-2.6-2.1-2.6.9-2.6 2.1 1.2 2.1 2.6 2.1z"/></svg>');
}

fs-image-viewer-control.rotate-left,
fs-image-viewer-control.rotate-right {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="17" height="19"><path fill="white" d="M16 17H6c0-2-3-7 4-8l1 3 5-8-9-3 1 3c-9 4-5 11-3 13H1l-1 1 1 1h15a1 1 0 0 0 0-2z"/></svg>');
}

fs-image-viewer-control.rotate-left {
  transform: scaleX(-1);
}
fs-image-viewer-control.rotate-left > div {
  transform: scaleX(-1);
  left: -81px;
}

fs-image-viewer-control.adjust-image {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="29" height="19"><path fill="white" d="M25.4 13c.8 0 1.5.7 1.5 1.5 0 .9-.7 1.5-1.5 1.5s-3.6-.5-3.6-1.5 2.8-1.5 3.6-1.5zm-5.9-4c.8.8 3-.8 3.6-1.4s.6-1.6 0-2.2c-.6-.6-1.6-.6-2.2 0-.5.5-2.2 2.8-1.4 3.6zM14 6.7c1.1 0 1.5-2.7 1.5-3.6s-.7-1.5-1.5-1.5c-.9 0-1.5.7-1.5 1.5s.4 3.6 1.5 3.6zM8.5 9c.7-.8-.9-3-1.5-3.6s-1.6-.6-2.2 0-.5 1.6.1 2.2S7.7 9.8 8.5 9zm-2.3 5.5c0-1.1-2.7-1.5-3.6-1.5-.8 0-1.5.7-1.5 1.5S1.8 16 2.6 16s3.6-.4 3.6-1.5z"/><path fill="none" stroke="white" stroke-width="2" d="M19.5,15h-11v-0.5c0-3,2.4-5.5,5.5-5.5 s5.5,2.4,5.5,5.5V15z"/></svg>');
}

fs-image-viewer-control.invert {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="17" height="19"><path fill="white" d="M16 5l-4-4-2-1H1L0 1v17l1 1h15l1-1V7l-1-2zm-3 12L2 4V2h7l1 1v3l1 1h3l1 1v9h-2z"/></svg>');
}

fs-image-viewer-control.fullscreen {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" baseProfile="tiny" id="Art" x="0px" y="0px" width="21px" height="17px" viewBox="0 0 21 17" xml:space="preserve"> <path fill="white" d="M20,17h-4.5c-0.553,0-1-0.447-1-1s0.447-1,1-1H18v-2.5c0-0.553,0.447-1,1-1s1,0.447,1,1V17z"></path> <path fill="white" d="M4.5,17H0v-4.5c0-0.553,0.447-1,1-1s1,0.447,1,1V15h2.5c0.553,0,1,0.447,1,1S5.053,17,4.5,17"></path> <path fill="white" d="M1,5.5c-0.553,0-1-0.447-1-1V0h4.5c0.553,0,1,0.447,1,1c0,0.553-0.447,1-1,1H2v2.5C2,5.053,1.553,5.5,1,5.5"></path> <path fill="white" d="M19,5.5c-0.553,0-1-0.447-1-1V2h-2.5c-0.553,0-1-0.447-1-1c0-0.553,0.447-1,1-1H20v4.5 C20,5.053,19.553,5.5,19,5.5"></path> <rect fill="none" width="21" height="17"></rect> </svg>');

}

fs-image-viewer-control.exit-fullscreen {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="Art" x="0px" y="0px" width="21px" height="17px" viewBox="0 0 21 17" xml:space="preserve"> <path opacity="0.5" fill="white" d="M20,17h-4.5c-0.553,0-1-0.447-1-1s0.447-1,1-1H18v-2.5c0-0.553,0.447-1,1-1s1,0.447,1,1V17z"></path> <path opacity="0.5" fill="white" d="M4.5,17H0v-4.5c0-0.553,0.447-1,1-1s1,0.447,1,1V15h2.5c0.553,0,1,0.447,1,1S5.053,17,4.5,17"></path> <path opacity="0.5" fill="white" d="M1,5.5c-0.553,0-1-0.447-1-1V0h4.5c0.553,0,1,0.447,1,1c0,0.553-0.447,1-1,1H2v2.5 C2,5.053,1.553,5.5,1,5.5"></path> <path opacity="0.5" fill="white" d="M19,5.5c-0.553,0-1-0.447-1-1V2h-2.5c-0.553,0-1-0.447-1-1c0-0.553,0.447-1,1-1H20v4.5 C20,5.053,19.553,5.5,19,5.5"></path> <rect fill="none" width="21" height="17"></rect> <g> <path fill="white" d="M10,13.9c-3.253,0-5.9-2.647-5.9-5.9c0-3.253,2.646-5.9,5.9-5.9c3.253,0,5.9,2.646,5.9,5.9 C15.9,11.253,13.253,13.9,10,13.9z M12.117,11.883c0.236,0.237,0.55,0.367,0.883,0.367s0.646-0.13,0.883-0.367 c0.236-0.235,0.366-0.549,0.366-0.883s-0.13-0.648-0.366-0.884L11.768,8l2.115-2.116c0.236-0.236,0.366-0.55,0.366-0.884 s-0.13-0.648-0.366-0.884C13.647,3.88,13.333,3.75,13,3.75s-0.647,0.13-0.883,0.366L10,6.232L7.883,4.116 C7.647,3.88,7.333,3.75,7,3.75c-0.334,0-0.647,0.13-0.884,0.366C5.88,4.352,5.75,4.666,5.75,5s0.13,0.648,0.366,0.884L8.232,8 l-2.116,2.116C5.88,10.352,5.75,10.666,5.75,11s0.13,0.647,0.366,0.883C6.353,12.12,6.667,12.25,7,12.25s0.646-0.13,0.883-0.367 L10,9.768L12.117,11.883z"></path> </g> </svg>');
}

fs-image-viewer-control.download {
  background-image: url('data:image/svg+xml,<svg version="1.2" height="20px" width="20px" baseProfile="tiny" id="Art" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 17 17" xml:space="preserve"><g id="Save_White__x28_S_x29_"></g><g><path fill="%23333331" d="M8.5,11.7c-0.1,0-0.2,0-0.3-0.1L2.4,5.3C2.3,5.2,2.3,5.2,2.3,5.1c0,0,0.1,0,0.2,0h2.6V1c0-0.5,0.4-0.9,0.9-0.9h5c0.5,0,0.9,0.4,0.9,0.9v4.1h2.6c0.1,0,0.2,0,0.2,0c0,0,0,0.1-0.1,0.2l-5.8,6.3C8.7,11.6,8.6,11.7,8.5,11.7z"/><path fill="%23FFFFFF" d="M8.5,11.7c-0.1,0-0.2,0-0.3-0.1L2.4,5.3C2.3,5.2,2.3,5.2,2.3,5.1c0,0,0.1,0,0.2,0h2.6V1c0-0.5,0.4-0.9,0.9-0.9h5c0.5,0,0.9,0.4,0.9,0.9v4.1h2.6c0.1,0,0.2,0,0.2,0c0,0,0,0.1-0.1,0.2l-5.8,6.3C8.7,11.6,8.6,11.7,8.5,11.7z"/></g><path fill="%23FFFFFF" d="M2,16.9c-1,0-1.9-0.9-1.9-1.9S1,13.1,2,13.1h13c1,0,1.9,0.9,1.9,1.9S16,16.9,15,16.9H2z"/><rect fill="none" width="17" height="17"/></svg>');
}

fs-image-viewer-control.fullscreen, fs-image-viewer-control.exit-fullscreen {
  background-position: 9.25px 8px;
  background-size: 20px 20px;
}

fs-image-viewer-control.show-single-image {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" baseProfile="tiny" id="Layer_1" x="0px" y="0px" width="24px" height="19px" viewBox="0 0 24 19" xml:space="preserve"> <path fill="white" d="M6,14.9c-0.496,0-0.9-0.404-0.9-0.9V6c0-0.496,0.404-0.9,0.9-0.9h12c0.496,0,0.9,0.404,0.9,0.9v8 c0,0.496-0.404,0.9-0.9,0.9H6z"></path> <polyline fill="none" stroke="white" stroke-width="2" stroke-miterlimit="10" points="23,1.85 23,18 1,18 1,1.85 "></polyline> <path fill="white" d="M0.103,1.9C0.155,0.898,0.986,0.1,2,0.1h20c1.014,0,1.845,0.798,1.897,1.8H0.103z"></path> <rect x="1" y="1" fill="white" width="22" height="2"></rect> <rect fill="none" width="24" height="19"></rect> </svg>');
}
fs-image-viewer-control.show-tiles {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" baseProfile="tiny" id="Layer_1" x="0px" y="0px" width="19px" height="16px" viewBox="0 0 19 16" xml:space="preserve"> <path fill="%23FFFFFF" d="M0.5,3.9c-0.221,0-0.4-0.179-0.4-0.4v-3c0-0.221,0.18-0.4,0.4-0.4h4c0.221,0,0.4,0.179,0.4,0.4v3 c0,0.221-0.18,0.4-0.4,0.4H0.5z"></path> <path fill="%23FFFFFF" d="M7.5,3.9c-0.221,0-0.4-0.179-0.4-0.4v-3c0-0.221,0.18-0.4,0.4-0.4h4c0.221,0,0.4,0.179,0.4,0.4v3 c0,0.221-0.18,0.4-0.4,0.4H7.5z"></path> <path fill="%23FFFFFF" d="M14.5,3.9c-0.221,0-0.4-0.179-0.4-0.4v-3c0-0.221,0.18-0.4,0.4-0.4h4c0.221,0,0.4,0.179,0.4,0.4v3 c0,0.221-0.18,0.4-0.4,0.4H14.5z"></path> <path fill="%23FFFFFF" d="M0.5,9.9c-0.221,0-0.4-0.179-0.4-0.4v-3c0-0.221,0.18-0.4,0.4-0.4h4c0.221,0,0.4,0.179,0.4,0.4v3 c0,0.221-0.18,0.4-0.4,0.4H0.5z"></path> <path fill="%23FFFFFF" d="M7.5,9.9c-0.221,0-0.4-0.179-0.4-0.4v-3c0-0.221,0.18-0.4,0.4-0.4h4c0.221,0,0.4,0.179,0.4,0.4v3 c0,0.221-0.18,0.4-0.4,0.4H7.5z"></path> <path fill="%23FFFFFF" d="M14.5,9.9c-0.221,0-0.4-0.179-0.4-0.4v-3c0-0.221,0.18-0.4,0.4-0.4h4c0.221,0,0.4,0.179,0.4,0.4v3 c0,0.221-0.18,0.4-0.4,0.4H14.5z"></path> <path fill="%23FFFFFF" d="M0.5,15.9c-0.221,0-0.4-0.179-0.4-0.4v-3c0-0.221,0.18-0.4,0.4-0.4h4c0.221,0,0.4,0.179,0.4,0.4v3 c0,0.221-0.18,0.4-0.4,0.4H0.5z"></path> <path fill="%23FFFFFF" d="M7.5,15.9c-0.221,0-0.4-0.179-0.4-0.4v-3c0-0.221,0.18-0.4,0.4-0.4h4c0.221,0,0.4,0.179,0.4,0.4v3 c0,0.221-0.18,0.4-0.4,0.4H7.5z"></path> <rect fill="none" width="19" height="16"></rect> </svg>');
}

.fs-image-viewer-control__tooltip,
.fs-image-viewer-slider__tooltip {
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.5s;
  width: 80px;
  color: #fff;
  text-align: center;
  padding: 6px;
  border-radius: 3px;
  position: absolute;
  left: 50px;
  font-size: 0.75rem;
  line-height: 1.3;
}

.fs-image-viewer-control__tooltip {
  background: #000;
  top: 5px;
}

.fs-image-viewer-slider__tooltip {
  background: #333;
  transform: translateY(-50%);
}

.fs-image-viewer__slider button:focus {
  outline: none;
}

.fs-image-viewer-control__tooltip::after,
.fs-image-viewer-slider__tooltip::after {
  content: '';
  display: block;
  position: absolute;
  left: -5px;
  width: 10px;
  height: 10px;
  transform: rotate(45deg);
  top: 50%;
  margin-top: -5px;
}

.fs-image-viewer-control__tooltip::after {
  background: #000;
}

.fs-image-viewer-slider__tooltip::after {
  background: #333;
}

fs-image-viewer-control:hover > .fs-image-viewer-control__tooltip,
.fs-image-viewer__slider > button:hover .fs-image-viewer-slider__tooltip {
  opacity: 1;
  transition-delay: 0.5s;
}

fs-image-viewer-control[open] > .fs-image-viewer-control__tooltip {
  opacity: 0;
}

.fs-image-viewer__adjustments {
  z-index: 200;
  color: #fff;
  opacity: 0.8;
  background-color: #000;
  text-align: center;
  width: 250px;
  height: 155px;
  padding: 20px 30px;
  position: absolute;
  left: 50%;
  top: 50%;
  margin-left: -125px;
  margin-top: -77px;
  overflow: visible;
}
.fs-image-viewer__adjustments label {
  display: block;
  color: #fff;
}
.fs-image-viewer__slider > button,
.fs-image-viewer__adjust-button,
.fs-image-viewer__adjust-buttons button::before {
  display: inline-block;
  width: 33px;
  height: 33px;
  background-repeat: no-repeat;
  background-size: 33px 33px;
}
.fs-image-viewer__slider {
  display: flex;
  align-items: center;
  width: 100%;
}
.fs-image-viewer__slider input[type=range] {
  flex-grow: 1;
  background: transparent;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}
.fs-image-viewer__slider input[type=range]:focus {
  outline: 0;
}
.fs-image-viewer__slider input[type=range]::-webkit-slider-runnable-track {
  box-sizing: border-box;
  height: 18px;
  cursor: pointer;
  background: #fff;
  border: 7px solid #000;
  border-radius: 13px;
}
.fs-image-viewer__slider input[type=range]::-moz-range-track {
  box-sizing: border-box;
  height: 18px;
  cursor: pointer;
  background: #fff;
  border: 7px solid #000;
  border-radius: 13px;
}
.fs-image-viewer__slider input[type=range]::-ms-track {
  box-sizing: border-box;
  height: 18px;
  cursor: pointer;
  background: #fff;
  border: 7px solid #000;
  border-radius: 13px;
}
.fs-image-viewer__slider input[type=range]::-webkit-slider-thumb {
  box-sizing: border-box;
  height: 22px;
  border: 1px solid #d3d3d3;
  width: 9px;
  border-radius: 3px;
  background: #fff;
  cursor: pointer;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  margin-top: -9px;
}
.fs-image-viewer__slider input[type=range]::-moz-range-thumb {
  box-sizing: border-box;
  height: 22px;
  border: 1px solid #d3d3d3;
  width: 9px;
  border-radius: 3px;
  background: #fff;
  cursor: pointer;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  margin-top: -9px;
}
.fs-image-viewer__slider input[type=range]::-ms-thumb {
  box-sizing: border-box;
  height: 22px;
  border: 1px solid #d3d3d3;
  width: 9px;
  border-radius: 3px;
  background: #fff;
  cursor: pointer;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  margin-top: -9px;
  margin-top: 0;
}
.fs-image-viewer__slider > button {
  background: none;
  border: 0;
  cursor: pointer;
  position: relative;
}
.fs-image-viewer__slider > .fs-image-viewer__brightness-less {
  background-image: url('data:image/svg+xml,<svg viewBox="0 0 33 33" xmlns="http://www.w3.org/2000/svg"><circle cx="16.5" cy="16.5" r="4" stroke="white" stroke-width="2"/><path fill="white" d="M15.6 8L15 5.5a1.6 1.6 0 1 1 3 0L17.4 8a1 1 0 0 1-1.8 0zM10 11.1L7.7 9.8a1.5 1.5 0 1 1 2-2.1l1.4 2.2A.9.9 0 0 1 10 11zM8 17.4l-2.5.6a1.5 1.5 0 1 1 0-3l2.5.6a.9.9 0 0 1 0 1.8zm3.1 5.7l-1.3 2.2a1.5 1.5 0 1 1-2.1-2l2.2-1.4A.9.9 0 0 1 11 23zm6.3 1.9l.6 2.5a1.6 1.6 0 1 1-3 0l.6-2.5a1 1 0 0 1 1.8 0zm5.7-3.1l2.2 1.3a1.6 1.6 0 1 1-2 2.1l-1.4-2.2A.9.9 0 0 1 23 22zm1.9-6.3l2.5-.6a1.6 1.6 0 1 1 0 3l-2.5-.6a.9.9 0 0 1 0-1.8zM21.9 10l1.3-2.2a1.6 1.6 0 1 1 2.1 2l-2.2 1.4A.9.9 0 0 1 22 10z"/></svg>');
}
.fs-image-viewer__slider > .fs-image-viewer__brightness-more {
  background-image: url('data:image/svg+xml,<svg viewBox="0 0 33 33" xmlns="http://www.w3.org/2000/svg"><g fill="white"><path d="M15.6 6.5l-.6-4a1.5 1.5 0 1 1 3 0l-.6 4a.9.9 0 0 1-1.8 0zm-6.8 3.6L5.5 7.7a1.5 1.5 0 1 1 2.2-2.2L10 8.8a.9.9 0 0 1-1.3 1.3zm-2.3 7.3l-4 .6a1.5 1.5 0 1 1 0-3l4 .6a.9.9 0 0 1 0 1.8zm3.6 6.8l-2.4 3.3a1.5 1.5 0 1 1-2.2-2.2L8.8 23a.9.9 0 0 1 1.2 1.3zm7.3 2.3l.6 4a1.5 1.5 0 1 1-3 0l.6-4a.9.9 0 0 1 1.8 0zm6.8-3.6l3.3 2.4a1.5 1.5 0 1 1-2.2 2.2L23 24.2a.9.9 0 0 1 1.3-1.2zm2.3-7.3l4-.6a1.5 1.5 0 1 1 0 3l-4-.6a.9.9 0 0 1 0-1.8zm-3.6-6.8l2.4-3.3a1.5 1.5 0 1 1 2.2 2.2L24.2 10A.9.9 0 0 1 23 8.8z"/><circle cx="16.5" cy="16.5" r="4.5"/></g><circle cx="16.5" cy="16.5" r="7" stroke="white" fill="none"/></svg>');
}
.fs-image-viewer__slider > .fs-image-viewer__contrast-less {
  background-image: url("data:image/svg+xml,<svg viewBox='0 0 33 33' xmlns='http://www.w3.org/2000/svg'><circle cx='16.5' cy='16.5' r='8' stroke='white' fill='gray' stroke-width='2'/></svg>");
}
.fs-image-viewer__slider > .fs-image-viewer__contrast-more {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33"><path fill="white" d="M16.5 7.5c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16v-14a7 7 0 0 1 7 7 7 7 0 0 1-7 7z"/></svg>');
}
.fs-image-viewer__adjust-buttons {
  display: flex;
  justify-content: center;
  align-content: space-between;
  padding-top: 10px;
}
.fs-image-viewer__adjust-buttons button {
  background: transparent;
  color: #fff;
  border: 0;
  cursor: pointer;
  display: flex;
  align-items: center;
  font-size: 1em;
}
.fs-image-viewer__adjust-buttons button::before {
  content: '';
}
.fs-image-viewer__adjust-buttons button:focus {
  outline: none;
}
.fs-image-viewer__adjust-buttons button[type=apply]::before {
  background-image: url("data:image/svg+xml,<svg viewBox='0 0 33 33' xmlns='http://www.w3.org/2000/svg'><path d='M14.2 24.8a1 1 0 0 1-1.4 0l-7-7a1 1 0 0 1 0-1.5l2.5-2.6a1 1 0 0 1 1.4 0l3 3c.5.5 1.1.5 1.5 0l9-9a1 1 0 0 1 1.5 0l2.6 2.6c.4.4.4 1 0 1.4l-13 13z' fill='white'/></svg>");
}
.fs-image-viewer__adjust-buttons button[type=cancel]::before {
  background-image: url("data:image/svg+xml,<svg viewBox='0 0 33 33' xmlns='http://www.w3.org/2000/svg' fill='white'><path d='M11.7 25.3a1 1 0 0 1-1.4 0l-2.6-2.6a1 1 0 0 1 0-1.4L21.3 7.7a1 1 0 0 1 1.4 0l2.6 2.6c.4.4.4 1 0 1.4L11.7 25.3z'/><path d='M25.3 21.3c.4.4.4 1 0 1.4l-2.6 2.6a1 1 0 0 1-1.4 0L7.7 11.7a1 1 0 0 1 0-1.4l2.6-2.6a1 1 0 0 1 1.4 0l13.6 13.6z'/></svg>");
}
</style>`,gr="fs-image-viewer-control";function mr(e,t){fetch(e,{headers:{"User-Agent":window.navigator.userAgent,accept:"image/jpg"},credentials:"include",method:"GET",mode:"cors"}).then(e=>e.blob()).then(e=>{const r=window.URL.createObjectURL(e);!function(e,t){const r=document.createElement("a");r.style.display="none",r.href=t,r.download=e,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t)}(t,r)}).catch(console.error)}customElements.get(gr)||customElements.define(gr,class extends HTMLElement{constructor(){let e,t;super(),Object.defineProperties(this,{alt:{get:()=>e,set:t=>{e=t,this.updateAlt()}},icon:{get:()=>t,set:e=>{t=e,this.updateIcon()}}})}connectedCallback(){setTimeout(()=>{ir(this,dr);const e=Array.from(this.querySelectorAll('[class$="InsertionPoint"], fs-image-viewer-control'));if(this.innerHTML=`<div class="${gr}__tooltip"></div>`,e.length){const t=document.createElement("div");t.className="fs-image-viewer__controls",e.forEach(e=>t.appendChild(e)),this.appendChild(t),this.addEventListener("click",e=>{e.target===this&&(null!==this.getAttribute("open")?this.removeAttribute("open"):this.setAttribute("open",""))})}this.updateAlt(),this.updateIcon()},0)}static get observedAttributes(){return["alt","icon"]}attributeChangedCallback(e,t,r){this[e]=r}updateAlt(){this.children.length&&(this.children[0].textContent=this.alt)}updateIcon(){this.style.backgroundImage=this.icon?`url('${this.icon}')`:null}});var ur=e=>{if(!e)throw new Error("Missing viewer");if(!e.src)throw new Error("Missing src");const{downloadUrl:t,localFileName:r}=function(e){let t="",r="";if(e.endsWith(".dzi")){const n=e.match(/(^.*)\/(([\w-.:]+)(\.[\w]+$))/);if(!n)throw new Error(`Regex fail, could not extract path and file without extension from ${e}`);{const[,e,o,i,a]=n;t=`${e}/dist.jpg`,r=`${i}.jpg`}}else{const n=e.includes("apid:")?e.split("apid:")[1]:"image";t=`${e}/dist.jpg`,r=`${n}.jpg`}return{downloadUrl:t,localFileName:r}}(e.src);mr(t,r)};const pr=/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"Cmd":"Ctrl";var vr=(e,t=!0)=>{const[r]=ar(e,[".fs-image-viewer__controls"]),[n,o,i,a,s,l,c,d,g]=Array.from(r.children),[m,u,p,v,h,f]=Array.from(g.children),w=(e,r)=>{const i=r.gridMode;if(n.alt=sr[e].zoomIn,o.alt=sr[e].zoomOut,s.alt=`${sr[e][`${r.fullscreen?"exit":"enter"}Fullscreen`]} (${pr} + Shift + F)`,c.alt=`${sr[e][i?"single":"tiles"]} (${i?"Enter":"Esc"})`,t){m.alt=`${sr[e].rotateLeft} (Shift + <)`,u.alt=`${sr[e].rotateRight} (Shift + >)`,f.alt=`${sr[e].download} (Shift + D)`,window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPhone/i)||(p.alt=`${sr[e].invert} (${pr} + /)`,v.alt=sr[e].adjustImage),g.alt=sr[e].tools,r.querySelector(".fs-image-viewer__adjustments")&&cr(r,e)}};return{initControls:(e,i)=>{Array.from(e.children).forEach(e=>{"fs-image-viewer-control"===e.tagName.toLowerCase()?r.appendChild(e):e.remove()}),(e=>{n.onclick=e.zoomInGrid?e.zoomInGrid:e.zoomIn,o.onclick=e.zoomOutGrid?e.zoomOutGrid:e.zoomOut})(e),(e=>{s.onclick=(()=>{e.fullscreen=!e.fullscreen;const t=new CustomEvent(`${e.tagName.toLowerCase()}:fullscreen-request`,{detail:e.fullscreen,bubbles:!0});e.dispatchEvent(t)})})(e),(e=>{c.onclick=(()=>{const t=new CustomEvent(`${e.tagName.toLowerCase()}:grid-mode-request`,{detail:e.gridMode,bubbles:!0});e.dispatchEvent(t)})})(e),(e=>{f.onclick=(()=>{if(e.downloadImage)ur(e);else{const t=new CustomEvent(`${e.tagName.toLowerCase()}:download-request`,{detail:e.src,bubbles:!0});e.dispatchEvent(t)}})})(e),t&&((e,t)=>{m.onclick=(()=>{e.rotation-=90}),u.onclick=(()=>{e.rotation+=90}),window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPhone/i)?(p.remove(),v.remove()):(p.onclick=(()=>{e.invert=!e.invert}),v.onclick=(()=>cr(e,t)))})(e,i),w(i,e)},updateControlsLocale:w,updateFullscreenControl:e=>{e?r.insertBefore(s,a):s.remove()},updateFullscreen:e=>{s.classList.toggle("fullscreen",!e),s.classList.toggle("exit-fullscreen",e)},updateDownloadControl:e=>{e?h.parentElement.insertBefore(f,h):f.remove()},updateGridControl:e=>{e?r.insertBefore(c,l):c.remove()},updateGridModeButton:e=>{c.classList.toggle("show-tiles",!e),c.classList.toggle("show-single-image",e)},updateToolsControl:e=>{e?r.insertBefore(g,d):g.remove()},updateBrightnessSlider:(e,t)=>{const r=e.querySelector('.fs-image-viewer__slider[type="brightness"] input');r&&(r.value=t)},updateContrastSlider:(e,t)=>{const r=e.querySelector('.fs-image-viewer__slider[type="contrast"] input');r&&(r.value=t)},updateHideZoomControl:e=>{e?(n.remove(),o.remove()):(r.insertBefore(n,i),r.insertBefore(o,i))}}};const hr={de:{returnToOriginal:"Zurück zur ursprünglichen Aufnahme",image:"Aufnahme",of:"von"},en:{returnToOriginal:"Return To Original Image",image:"Image",of:"of"},es:{returnToOriginal:"Volver a la imagen original",image:"Imagen",of:"de"},eo:{returnToOriginal:"[Returñ Tö Origiñal Image----------]",image:"[Image----------]",of:"[öf----------]"},fr:{returnToOriginal:"Retourner à l’image d’origine",image:"Image",of:"de"},it:{returnToOriginal:"Torna all’immagine originale",image:"Immagine",of:"di"},ja:{returnToOriginal:"元の画像に戻る",image:"画像",of:"／"},ko:{returnToOriginal:"원본 이미지로 돌아가기",image:"이미지",of:"/"},pt:{returnToOriginal:"Voltar à imagem original",image:"Imagem",of:"De"},ru:{returnToOriginal:"Вернуться к исходному снимку",image:"Снимок",of:"из"},zh:{returnToOriginal:"返回原始影像",image:"影像",of:"／"}},fr=rr`<style component="fs-image-viewer-navigation">
.fs-image-viewer__navigation-pager {
  position: absolute;
  top: 10px;
  left: 10px;
  background-color: #000;
  opacity: 0.7;
  display: flex;
  flex-flow: row;
  justify-content: center;
  align-items: center;
  color: #fff;
  white-space: nowrap;
  padding: 5px 6px;
  border-radius: 5px;
}
.fs-image-viewer__navigation-pager input[type=text] {
  padding: 2px;
  margin: 0 5px;
  max-width: 45px;
  text-align: center;
}
.fs-image-viewer__navigation-pager span {
  padding: 0 2px;
}
.fs-image-viewer__navigation-pager .fs-image-viewer__navigation-total {
  padding-left: 4px;
}
.fs-image-viewer__left-arrow, .fs-image-viewer__right-arrow {
  width: 50px;
  height: 100px;
  background-color: #000;
  border: none;
  position: absolute;
  top: 45%;
  opacity: .7;
  display: flex;
  flex-flow: row;
  cursor: pointer;
  align-items: center;
}
.fs-image-viewer__left-arrow {
  left: 0;
  border-radius: 0 50px 50px 0;
  justify-content: flex-start;
}
.fs-image-viewer__left-arrow::before {
  content: '';
  display: block;
  width: 20px;
  height: 30px;
  margin-left: 7px;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 17"><path fill="white" d="M3.34,8.5,8.67,3.17a1.3,1.3,0,0,0,0-1.84C7.35,0,6.38,1.94.93,7.23a1.8,1.8,0,0,0,0,2.54l5.9,5.9a1.3,1.3,0,0,0,1.84-1.84Z"/></svg>') no-repeat center;
}
.fs-image-viewer__right-arrow {
  right: 0;
  border-radius: 50px 0 0 50px;
  justify-content: flex-end;
}
.fs-image-viewer__right-arrow::before {
  content: '';
  display: block;
  width: 20px;
  height: 30px;
  margin-right: 7px;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 17"><path fill="white" d="M3.17,1.33A1.3,1.3,0,0,0,1.33,3.17L6.66,8.5,1.33,13.83a1.3,1.3,0,0,0,1.84,1.84l5.9-5.9a1.8,1.8,0,0,0,0-2.54Z"/></svg>') no-repeat center;
}
.fs-button.fs-image-viewer__navigation-return-to-orig {
    display: block;
    position: absolute;
    background-color: #000;
    opacity: 0.7;
    color: white;
    bottom: 10px;
    left: 10px;
    border: none;
    border-radius: 5px;
}
.fs-button.fs-image-viewer__navigation-return-to-orig:hover {
    background-color: #000;
    opacity: 0.7;
    color: white;
}
.fs-button.fs-image-viewer__navigation-return-to-orig[inactive] {
    opacity: 0;
}

</style>`,wr=rr`
  <div class="fs-image-viewer__navigation-container">
    <div class="fs-image-viewer__navigation-pager">
      <span></span>
      <input class="fs-image-viewer__navigation-index" type="text">
      <span></span>
      <span class="fs-image-viewer__navigation-total"></span>
    </div>
    <div class="fs-image-viewer__navigation-arrows">
      <div class="fs-image-viewer__left-arrow" inactive></div>
      <div class="fs-image-viewer__right-arrow" inactive></div>
    </div>
    <button class="fs-button fs-image-viewer__navigation-return-to-orig" inactive></button>
  </div>
`;var br=e=>{const t=wr.cloneNode(!0);let r=!1;const[n]=ar(t,[".fs-image-viewer__navigation-pager"]),[o]=ar(t,[".fs-image-viewer__navigation-arrows"]),[i]=ar(t,[".fs-image-viewer__navigation-return-to-orig"]),[a,s,l]=Array.from(n.children),[c,d]=Array.from(o.children),g=e=>{e&&hr[e]&&(a.innerText=`${hr[e].image} `,l.innerText=` ${hr[e].of} `,i.innerText=` ${hr[e].returnToOriginal} `)},m=()=>parseInt(s.value,10)-1,u=(e,t)=>{t?e.removeAttribute("inactive"):e.setAttribute("inactive",!0)},p=(e,t)=>{o&&(u(c,0!==t),u(d,t!==e.total-1)),i&&u(i,t!==e.origIndex)},v=t=>{t<=e.total&&t>=0?e.setIndex(t):(e.updateIndex(e.index),e.setIndex(e.index)),p(e,t)},h=(e,t,r)=>{t>=0&&(e.index=t),r&&(e.total=r),void 0===e.origIndex&&(e.origIndex=t)};return{initialize(){r||(Array.from(t.children).forEach(t=>e.appendChild(t)),ir(e,fr),g(e.locale),e.origIndex=e.index,e.updateIndex(e.index),e.updateTotal(e.total),s.oninput=(e=>{s.value=(({value:e})=>{let t="";return[...e].forEach(e=>{const r=e.match("[0-9]");t+=r?r[0]:""}),t})(e.currentTarget)}),s.onblur=(()=>{v(m())}),s.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),v(m()))}),e.arrows?(e.appendChild(o),p(e,e.index),c.onclick=(()=>{v(e.index-1)}),d.onclick=(()=>{e.index+1<e.total&&v(e.index+1)})):o.remove(),e.returnToOrig?(e.appendChild(i),p(e,e.index),i.onclick=(()=>{v(e.origIndex)})):i.remove(),r=!0)},initNavigation:({index:e,srcs:t,locale:r},n,o)=>{t&&t.length&&h(n,e,t.length),n.setIndex=o,n.locale=r},updateNavigationLocale:g,updateNavigationPager:h}},yr=e=>{const t=br(e);e.initialize=(()=>{t.initialize()})};const _r="fs-image-viewer-navigation";customElements.get(_r)||customElements.define(_r,class extends HTMLElement{constructor(){let e,t;super(),yr(this),Object.defineProperties(this,{index:{get:()=>e,set:t=>{e=t,this.updateIndex(e)}},total:{get:()=>t,set:e=>{t=e,this.updateTotal(t)}}})}connectedCallback(){setTimeout(this.initialize,0)}static get observedAttributes(){return["index","total"]}updateIndex(e){const t=this.querySelector(".fs-image-viewer__navigation-index");t&&e>=0&&(t.value=e+1)}updateTotal(e){const t=this.querySelector(".fs-image-viewer__navigation-total");t&&e&&(t.innerText=e)}});const{TOP_LEFT:Ir,TOP_RIGHT:xr,BOTTOM_LEFT:Or,BOTTOM_RIGHT:Er}={TOP_LEFT:"__overlay-resize-handle-TOP-LEFT__",TOP_RIGHT:"__overlay-resize-handle-TOP-RIGHT__",BOTTOM_LEFT:"__overlay-resize-handle-BOTTOM-LEFT__",BOTTOM_RIGHT:"__overlay-resize-handle-BOTTOM-RIGHT__"},Ar=rr`
<div class="fs-image-viewer">
  <div><div class="fs-image-viewer__stage">
    <div class="fs-image-viewer__image"></div>
    <div class="fs-image-viewer__overlays" inactive></div>
    <div class="fs-image-viewer__overlay-mask" inactive><div></div><div></div><div></div><div></div></div>
    <div class="fs-image-viewer__drag-rectangle" inactive></div>
  </div></div>
  <div class="fs-image-viewer__markers" inactive></div>
  <div class="fs-image-viewer__overlay-rects"></div>
  <div class="fs-image-viewer__overlay-handles" inactive>
    <div id="${xr}"></div>
    <div id="${Ir}"></div>
    <div id="${Or}"></div>
    <div id="${Er}"></div>
  </div>
  <div class="fs-image-viewer__decoration">
    <fs-image-viewer-navigation class="fs-image-viewer__navigation" interactive></fs-image-viewer-navigation>
    ${'\n  <div class="fs-image-viewer__controls" interactive>\n    <fs-image-viewer-control class="zoom-in"></fs-image-viewer-control>\n    <fs-image-viewer-control class="zoom-out"></fs-image-viewer-control>\n    <div class="zoomInsertionPoint"></div>\n    <div class="fullscreenInsertionPoint"></div>\n    <fs-image-viewer-control class="fullscreen"></fs-image-viewer-control>\n    <div class="gridModeInsertionPoint"></div>\n    <fs-image-viewer-control class="show-tiles"></fs-image-viewer-control>\n    <div class="toolsInsertionPoint"></div>\n    <fs-image-viewer-control class="tools" no-close>\n      <fs-image-viewer-control no-close class="rotate-left"></fs-image-viewer-control>\n      <fs-image-viewer-control no-close class="rotate-right"></fs-image-viewer-control>\n      <fs-image-viewer-control class="invert"></fs-image-viewer-control>\n      <fs-image-viewer-control class="adjust-image"></fs-image-viewer-control>\n      <div class="downloadInsertionPoint"></div>\n      <fs-image-viewer-control class="download"></fs-image-viewer-control>\n    </fs-image-viewer-control>\n  </div>\n'}
    <div class="fs-image-viewer__message" inactive>
      <div class="fs-alert">
        <button class="fs-dialog__close" interactive inactive></button>
        <p>--message--</p>
      </div>
    </div>
  </div>
</div>
`,Nr=(e,t,r,n,o)=>{const[i,a,s,l]=[t,r,n,o].map(e=>`${100*e}%`);Object.assign(e.style,{left:i,top:a,width:s,height:l})};var Tr=(e,t)=>{let r=null,n=null,o=!1;const i=Ar.cloneNode(!0),a={},s={},l={};let c=null,d=!1,g="en";const[m,u,p,v,h,f,w,b,y,_,I,x,O,E]=(e=>ar(i,e.map(e=>`.fs-image-viewer__${e}`)))(["markers","stage","image","overlays","overlay-mask","overlay-rects","overlay-handles","drag-rectangle","message","message p","message button","navigation","controls","decoration"]),{initControls:N,updateControlsLocale:T,updateHideZoomControl:R,updateToolsControl:M,updateBrightnessSlider:k,updateContrastSlider:C,updateGridControl:L,updateFullscreenControl:S,updateDownloadControl:z,updateFullscreen:D}=vr(i),{initNavigation:P,updateNavigationPager:B,updateNavigationLocale:F}=br(),[G,j,$,H]=ar(w,[`#${xr}`,`#${Ir}`,`#${Or}`,`#${Er}`]),[Z,V,U,Y]=Array.from(h.children),q=y.children[0],X=e=>e.removeAttribute("inactive"),W=(e,t)=>{u.style.width=`${e}px`,u.style.height=`${t}px`},K=()=>{if(!c)return;const{xmin:r,ymin:n,xmax:o,ymax:i}=c,a=t();if(a){const t=(t,r,n)=>{const{x:o,y:i}=a.toPixels(r,n);t.style.transform=`translate(${o}px, ${i}px)`,o<0||i<0||o>e.clientWidth||i>e.clientHeight?t.setAttribute("inactive",""):t.removeAttribute("inactive")};t(j,r,n),t(G,o,n),t($,r,i),t(H,o,i)}},J=t=>{t&&Object.keys(l).map(e=>l[e]).filter(e=>e).forEach(r=>{let n,o,i=!1;const l=r.node;if(null!=r.x)({x:n,y:o}=r);else{const{followOverlayId:e,followOverlayPosition:t,hideWhenInactive:l}=r;let c=a[e];if("__ACTIVE__"===e){const e=Object.keys(s);c=a[e[0]]}if(!c||l&&!s[e])e&&(i=!0);else{const e=t||"";({x:n,y:o}=c.overlay);const{width:r,height:i}=c.overlay;e.match("right")?n+=r:e.match("left")||(n+=r/2),e.match("bottom")?o+=i:e.match("top")||(o+=i/2)}}({x:n,y:o}=t.toPixels(n,o)),null!=n&&(l.style.transform=`translate(${n}px, ${o}px)`),(n<0||o<0||n>e.clientWidth||o>e.clientHeight)&&(i=!0),i?l.setAttribute("inactive",""):X(l)})},Q=e=>{if(1===e.length){X(h);const{overlay:t}=a[e[0]];Nr(U,0,0,t.x,1),Nr(Y,t.x+t.width,0,1-t.x-t.width,1),Nr(Z,0,0,1,t.y),Nr(V,0,t.y+t.height,1,1-t.y-t.height)}else h.setAttribute("inactive","")},ee=t=>{e.index=t,e.src=e.srcs[t]};return{initialize(){o||(ir(e,nr),X(m),X(v),N(e,g),Array.from(i.children).forEach(t=>e.appendChild(t)),e.credentials||(e.credentials="include"),P(e,x,ee),o=!0)},updateFilters(e){if(e&&!window.navigator.userAgent.match(/iPad/i)&&!window.navigator.userAgent.match(/iPhone/i))if(1!==e.brightness||1!==e.contrast||e.invert){const t="-webkit-transform: translateZ(0); -webkit-perspective: 1000; -webkit-backface-visibility: hidden;",r=`${e.invert?"invert(1)":""} ${1!==e.brightness?`brightness(${e.brightness})`:""} ${1!==e.contrast?`contrast(${e.contrast})`:""};`,n=`-webkit-filter: ${r} -moz-filter: ${r} -o-filter: ${r} -ms-filter: ${r} filter: ${r} `;p.setAttribute("style",n+t)}else p.removeAttribute("style")},setSource(t){for(n=t,e.srcs&&e.srcs.length&&B(x,e.index,e.srcs.length);p.firstChild;)p.removeChild(p.firstChild);r={}},setOrderedImages(t){t&&t.length&&B(x,e.getIndexOf(e.src),t.length)},setSingleImage({width:e,height:t}){W(e,t);const r=new Image;r.src=n,p.appendChild(r)},initTiles({width:e,height:t,lowestLevel:n,highestLevel:o}){W(e,t);for(let e=n;e<=o;e++){const t=document.createElement("div");t.classList.add("fs-image-viewer__level"),t.classList.add(`fs-image-viewer__level--level${e}`);const n={level:e,elem:t,tiles:{}};r[e]=n,p.appendChild(t)}},setMessage(t,r,n){n&&X(I),I.onclick=(()=>{e.clearMessage()}),I.setAttribute("aria-label",or[g].closeAlert),_.innerText=or[g][t]||t,q.className=`fs-alert fs-alert--${r}`,X(y)},clearMessage(){y.setAttribute("inactive",!0)},updateTiles(t){t&&t.forEach(t=>{const{level:n,tiles:o}=t,{elem:i,tiles:a}=r[n];o.forEach(t=>{if(!a[t.src]){const r=new Image,{src:n,left:o,top:s,width:l,height:c}=t;r.onerror=((e,t)=>r=>{const n=A(r),o=e.tagName.toLowerCase(),{status:i}=r,{message:a}=n,s=new CustomEvent(`${o}:image-error`,{detail:{message:a,src:t,status:i},bubbles:!0});e.dispatchEvent(s)})(e,n),r.src=n,Nr(r,o,s,l,c),a[n]=r,i.appendChild(r)}})})},updateOverlays(r){Object.keys(a).forEach(e=>{r[e]||(a[e].node.remove(),delete a[e])}),Object.keys(r).forEach(e=>{const t=r[e];let n=a[e];if(n)n.overlay=t;else{const r=document.createElement("div");r.className="fs-image-viewer__overlay",r.id=e,v.appendChild(r),n={overlay:t,node:r},a[e]=n}const{overlay:o,node:i}=n,{x:s,y:l,width:c,height:d,type:g}=o;Nr(i,s,l,c,d),g?i.setAttribute("type",g):i.removeAttribute("type")}),Q(e.selectedOverlays.list()),J(t())},updateSelection(e){Object.keys(a).forEach(t=>{const r=a[t].node;e[t]?r.setAttribute("selected",""):r.removeAttribute("selected")});const t=Object.keys(e);Q(t)},updateSelectionRects(e){Object.keys(s).forEach(t=>{if(!e[t]){const e=s[t];delete s[t],e.setAttribute("inactive",""),setTimeout(()=>e.remove(),300)}}),Object.keys(e).forEach(t=>{const r=e[t];let n=s[t];n||(n=document.createElement("div"),s[t]=n,n.setAttribute("inactive",""),f.appendChild(n),requestAnimationFrame(()=>X(n)));const{x:o,y:i,width:a,height:l}=r,{style:c}=n;c.width=`${a}px`,c.height=`${l}px`,c.transform=`translate(${o}px, ${i}px)`}),J(t())},updateSelectionHandles(e){c=e;const t=e&&e.type?e.type:"none";w.style.setProperty("--handle-color",`var(--color-${t}`),c?(K(),X(w),Array.from(w.children).forEach(e=>X(e))):(w.setAttribute("inactive",""),Array.from(w.children).forEach(e=>e.setAttribute("inactive","")))},updateIsDrawing(e){if(d=e,e)X(b);else{const{style:e}=b;e.width=0,e.height=0,b.setAttribute("inactive",!0)}},updateDragRectangle({start:t,end:r}){if(!d||!t)return;const{x:n,y:o,width:i,height:a}=it(t,r),{width:s,height:l}=e.nativeSize,{style:c}=b;c.transform=`translate(${n*s}px, ${o*l}px)`,c.width=`${100*i}%`,c.height=`${100*a}%`},updateMarkers(e){const r=t();Object.keys(l).forEach(t=>{e[t]||(l[t].node.remove(),delete l[t])}),Object.keys(e).forEach(t=>{const r=e[t];l[t]||m.appendChild(r.node),l[t]=r}),J(r)},setTransform(e){const r=t();e&&(u.style.transform=`matrix(${e.join(",")})`,J(r),c&&K())},updateFullscreenControl:S,updateFullscreen(t){T(g,e),D(t)},updateGridControl:L,updateToolsControl:M,updateDownloadControl:z,updateBrightnessSlider(t){k(e,t)},updateContrastSlider(t){C(e,t)},updateHideZoomControl:R,updateLocale(t){T(g=t,e),F(g)},updateNavigation(e){x&&(e?E.insertBefore(x,O):x.remove())},updateNavigationArrows(e){x.arrows=e},updateNavigationReturnToOrig(e){x.returnToOrig=e}}};const{POINT_UP:Rr,POINT_DOWN:Mr,POINT_MOVE:kr}=e.user;var Cr=({node:e,getViewManager:h,store:f,updater:w})=>{const b=e=>{let t=!1;return r=>{t||(e(r),t=!0,requestAnimationFrame(()=>{t=!1}))}},y=e=>t=>{t.preventDefault(),e(t)},_=(t,r)=>{const{top:n,left:o}=e.getBoundingClientRect();return{viewX:t-o,viewY:r-n}},I=(t,r,n,o)=>{if(!t)return;const{viewX:i,viewY:a}=_(n,o),{panX:s,panY:l,zoom:c}=t.getZoomTo(r,i,a);e.panZoom={panX:s,panY:l,zoom:c}},x=(e,t,r,n,o)=>{w(e,e=>{e?t.addEventListener(r,n,o):t.removeEventListener(r,n,o)})},O=e=>e.inDom,E=e=>O(e)&&!e.gridMode,A=e=>E(e)&&!e.startPoint,N=e=>E(e)&&(e=>!(e.noPan&&e.noZoom))(e),T=e=>E(e)&&e.startPoint,R=e=>O(e)&&e.listeningToKeyboard;let M=!1;const k=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),C=`${/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}Key`;try{TouchEvent&&(M=!0)}catch(e){M=!1}function L(e){const{tagName:t}=e.target;return["BUTTON","INPUT","SELECT","TEXTAREA"].includes(t)}x(R,document,"keydown",t=>{if(L(t))return;const r=t.key.toLowerCase(),n=e.gridMode,o=e.tagName.toLowerCase();if(!n&&"k"===r&&t.shiftKey&&t[C])e.contrast=Math.min(e.contrast+.1,2);else if(!n&&"k"===r&&t[C])e.brightness=Math.min(e.brightness+.1,2);else if(!n&&"j"===r&&t.shiftKey&&t[C])e.contrast=Math.max(e.contrast-.1,0);else if(!n&&"j"===r&&t[C])e.brightness=Math.max(e.brightness-.1,0);else if(!n&&r===u&&t[C])e.invert=!e.invert;else if(e.fullscreenControl&&"f"===r&&t.shiftKey&&t[C]){e.fullscreen=!e.fullscreen;const t=new CustomEvent(`${o}:fullscreen-request`,{detail:e.fullscreen,bubbles:!0});e.dispatchEvent(t)}else{if(!e.downloadControl||"d"!==r||!t.shiftKey)return;e.querySelector(".download").click()}t.preventDefault()}),x(R,document,"keydown",u=>{if(L(u))return;const{key:v}=u,{gridMode:h,noPan:f,noZoom:w}=e;w||v!==s&&v!==c?w||v!==l&&v!==d?h||v!==g?h||v!==m?u.shiftKey?h||f||0!==e.rotation||(v===t?e.panX+=.05:v===r?e.panX-=.05:v===n?e.panY+=.05:v===o&&(e.panY-=.05)):h?v===t?e.horizontal?e.gotoPreviousRow():e.index--:v===r?e.horizontal?e.gotoNextRow():e.index++:v===n?e.horizontal?e.index++:e.gotoPreviousRow():v===o?e.horizontal?e.index--:e.gotoNextRow():v===i||v===a?e.gridMode=!h:v===p&&(e.gridMode=!0):v===p&&(e.gridMode=!0):e.rotation+=90:e.rotation-=90:e[`zoomOut${h?"Grid":""}`]():e[`zoomIn${h?"Grid":""}`]()}),x(e=>E(e)&&!e.noZoom,e,"wheel",t=>{const{minZoom:r,maxZoom:n,zoom:o}=e,{deltaY:i,deltaMode:a,ctrlKey:s,clientX:l,clientY:c,target:d}=t;let g=i;s&&(g*=10),a&&(g*=4*Math.abs(i));const m=Math.max(Math.min(o-.001*g,n),r)-o;e.scrollingParent&&!s||e.noZoom||(t.preventDefault(),I(h(d.src),m,l,c))},{passive:!1});const S=(e,t)=>{const{clientX:r,clientY:n}=e,{viewX:o,viewY:i}=_(r,n),{x:a,y:s}=t.fromPixels(o,i);return{viewX:o,viewY:i,imgX:a,imgY:s}},z=({touches:e},t)=>{const r=[...e].map(e=>S(e,t)),[n,o]=r;if(!o)return n;const i=(n.viewX+o.viewX)/2,a=(n.viewY+o.viewY)/2,s=(n.imgX+o.imgX)/2,l=(n.imgY+o.imgY)/2,c=n.viewX-o.viewX,d=n.viewY-o.viewY;return{viewX:i,viewY:a,imgX:s,imgY:l,distance:Math.sqrt(Math.pow(c,2)+Math.pow(d,2))*t.getScale(),rotation:Math.atan2(d,c)}},D=Math.PI/180,P=(e,t)=>{const r=S(e,t);return r.distance=50*e.scale,r.rotation=e.rotation*D,r.gesture=!0,r},B=t=>t&&t!==e&&(t.hasAttribute("interactive")||B(t.parentElement)),F=(e,t)=>r=>{const{src:n}=r.target,o=h(n);if(!o)return;const i=t(r,o);((e,t,r)=>{if(B(r.target)||2===r.button)return;const{src:n,id:o}=r.target;t.id=o,t.src=n,t.buttonDown=r.buttons?r.buttons:r.which,(M&&r instanceof TouchEvent||k&&r instanceof GestureEvent)&&e===kr&&(t.buttonDown=1),f.dispatch({type:e,data:t})})(e,i,r)},G=e=>F(e,S),j=b(G(kr));void 0===e.ontouchstart&&x(A,e,"mousemove",j),e.addEventListener("mousedown",G(Mr));const $=(e,t)=>x(T,document,e,t);$("mousemove",j),$("mouseup",G(Rr)),["click","dblclick"].forEach(t=>{e.addEventListener(t,r=>{if(!B(r.target))if(e.gridMode){if(r.target.src){e.src=r.target.src,"click"===t&&(e.gridMode=!1);const n=e.tagName.toLowerCase(),o=new CustomEvent(`${n}:${t}`,{detail:{src:e.src,index:e.index},bubbles:!0});e.dispatchEvent(o),r.preventDefault()}}else if("dblclick"===t&&!e.noZoom&&!r.target.classList.contains("fs-image-viewer__overlay")){r.preventDefault();const t=h(r.target.src);I(t,.2*e.zoom,r.clientX,r.clientY)}})});const H=(e,t,r)=>x(T,document,e,t,r);e.addEventListener("touchstart",F(Mr,z),{passive:!1}),H("touchmove",(e=>t=>{const{touches:r}=t,{noPan:n,scrollingParent:o,selectedOverlays:i}=f.getState();r.length<=1&&(o||n)&&i===v.OBJECT||e(t)})(y(b(F(kr,z)))),{passive:!1}),H("touchend",G(Rr)),e.addEventListener("gesturestart",y(F(Mr,P)),{passive:!1}),x(N,e,"gesturechange",y(b(F(kr,P))),{passive:!1}),x(N,e,"gestureend",y(F(Rr,P)))};const{OBJECT:Lr}=v,{DRAWING:Sr,MOVING:zr,PANNING:Dr,RESIZING:Pr}=h;var Br=(e,t)=>{const r=(r,n,o=null,i=(()=>!0),a)=>{t(n,t=>{if(!i(t))return;const n=e.tagName.toLowerCase(),a=new CustomEvent(`${n}:${r}`,{detail:t,bubbles:!0});if(e.dispatchEvent(a),o){const e=o();e&&e(a)}},a)};r("column-count",e=>e.columnCount),r("draw",(e,t)=>{const{startPoint:r,currentPoint:n,behavior:o}=t;return e.behavior||o!==Sr?null:{start:r,end:n,rectangle:it(r,n)}},()=>e.onDraw,e=>e),r("grid-mode",e=>e.gridMode),r("image-change",e=>{const t=e.currentImage,r=e.images[t];return{src:t,index:(r?r.order:null)||null}}),r("image-load",e=>e.inDom&&e.images[e.currentImage],()=>e.onImageLoad,Boolean,(e,t)=>e===t),r("images-change",e=>e.orderedImages),r("overlay-selection",e=>e.selectedOverlays),r("overlay-change",(e,t)=>{const{behavior:r,selectedOverlays:n,overlays:o}=e,{behavior:i}=t;if(!(i!==zr&&i!==Pr||r)){const e={};return Object.keys(n).forEach(t=>e[t]=o[t]),{overlays:e}}if(r!==zr&&r!==Pr){const r=((e,t)=>{if(!e||t===e)return null;let r=null;const n={};return Object.keys(e).forEach(o=>{t[o]&&e[o]!==t[o]&&(n[o]=e[o],r=n)}),r})(e.overlays,t.overlays);return r&&{overlays:r}}return null},null,e=>null!=e),r("point",(e,t)=>{const{selectedOverlays:r,behavior:n}=e,{startPoint:o,behavior:i}=t;if(i!==Dr||n){if(n||i||r!==Lr)return null}else if(t.dragHappened||o.gesture)return null;return o},()=>e.onPoint,e=>e),r("point-down",e=>{const{startPoint:t,selectedOverlays:r,behavior:n}=e;return n||t&&t.gesture||r!==Lr?null:t},()=>e.onPointDown,e=>e),r("rotation",e=>180*e.rotation/Math.PI),r("zoom-pan",e=>({panX:e.panX,panY:e.panY,zoom:e.zoom}))};const Fr=(e,t,r,n,o)=>(e/t-.5)/r/n+o,Gr=(e,t,r,n,o)=>((e-o)*r*n+.5)*t,jr=(e,t,r)=>e.map(([e,t],r)=>[e,t,r]).filter(([e,n])=>t(e)<=r&&t(e+n)>=0),$r=(e,t,r,n,o)=>{const i=[],a=Math.ceil(e/Math.pow(2,r-t)),s=o/a,l=n/a,c=a%n/a||l,d=Math.ceil(a/n)-1;let g=0,m=s,u=l;for(let e=0;e<=d;e++)e===d&&(u=c,m=0),i.push([e*l-g,u+m+g]),g=s;return i},Hr=(e,t)=>{let r,n,o,i=.5,a=.5,s=1,l=0,c=Math.cos(l),d=Math.sin(l);const g=[],m=(e,t,r=0,n=0,o=1)=>({x:r+(e-r)*c-(t-n)*d*o,y:n+(e-r)*d*o+(t-n)*c}),u=e=>{let t,l,p,v,h,f,w,b,y;const _=()=>Math.min(r/p,n/v),I=()=>{const e=_();b=p*e/r,y=v*e/n};g.push(I);const x=e=>Gr(e,r,b,s,i),O=e=>Gr(e,n,y,s,a),E=e=>Fr(e,r,b,s,i),A=e=>Fr(e,n,y,s,a),N={getScale:_,getSize:u.getSize,setSize:u.setSize,getPanZoom:u.getPanZoom,setPanZoom:u.setPanZoom,getRotation:u.getRotation,setRotation:u.setRotation,setRelativeLevels:u.setRelativeLevels,getCanvasTransform:u.getCanvasTransform,getTransformMatrix:()=>{const e=c*s*b*r/p,t=d*s*y*n/v,o=r*(.5-i*b*s),l=n*(.5-a*y*s),{x:g,y:u}=m(o,l,.5*r,.5*n);return[e,t,-t,e,g,u]},toPixels:(e,t)=>m(x(e),O(t),.5*r,.5*n),fromPixels:(e,t)=>{const{x:o,y:i}=m(e,t,.5*r,.5*n,-1);return{x:E(o),y:A(i)}},getFootprint:()=>({x:x(0),y:O(0),width:r*b*s,height:n*y*s}),getPanTo:(e,t)=>{const{x:o,y:l}=m(e,t,0,0,-1);return{panX:i-o/r/s/b,panY:a-l/n/s/y}},panTo:(e,t)=>{const r=N.getPanTo(e,t);({panX:i,panY:a}=r)},getZoomTo:(e,t,r)=>{const{x:n,y:o}=N.fromPixels(t,r);return{zoom:s+s*e,panX:i+(n-i)*e/(e+1),panY:a+(o-a)*e/(e+1)}},zoomTo:(e,t,r)=>{const n=N.getZoomTo(e,t,r);({panX:i,panY:a,zoom:s}=n)},getBottomZoomLevel:()=>Math.min(8,Math.log2(Math.min(p,v))),getTopZoomLevel:()=>Math.log2(Math.max(p,v)),getVisibleTiles:()=>{const e=N.getBottomZoomLevel(),i=N.getTopZoomLevel(),a=s*b*r/p,c=i+Math.floor(Math.log2(a)),d=((e,t,r,n)=>e.map(e=>Math.floor(e+r)).map(e=>Math.max(e,Math.floor(t))).map(e=>Math.min(e,Math.ceil(n))).sort((e,t)=>e-t).filter((e,t,r)=>t===r.indexOf(e)))(o,e,c,i).map(e=>{const o=jr($r(p,e,Math.ceil(i),h,w),x,r),a=jr($r(v,e,Math.ceil(i),h,w),O,n),s=[];return a.forEach(([r,n,i])=>{o.forEach(([o,a,c])=>{s.push({src:`${t}/${e}/${c}_${i}.${f}${l}`,left:o,top:r,width:a,height:n})})}),{level:e,tiles:s}});return d.toPixels=(()=>d.map(e=>({level:e.level,tiles:e.tiles.map(e=>({src:e.src,left:x(e.left),top:O(e.top),width:e.width*s*b*r,height:e.height*s*y*n}))}))),d},setImage:({tilePath:e,query:r,width:n=null,height:o=null,tileSize:i=256,overlap:a=1,format:s="jpg"}={})=>{if(!n||!o)throw new Error("Must set width and height at least");t=e,l=r,p=n,v=o,h=i,w=a,f=s,I()}};return e&&N.setImage(e),N};return u.getSize=(()=>({width:r,height:n})),u.setSize=((e,t)=>{r=e,n=t,g.forEach(e=>e())}),u.getPanZoom=(()=>({zoom:s,panX:i,panY:a})),u.setPanZoom=((e,t,r=s)=>{i=e,a=t,s=r}),u.getRotation=(()=>l),u.setRotation=(e=>{l=e,d=Math.sin(l),c=Math.cos(l)}),u.getCanvasTransform=(()=>{const{x:e,y:t}=m(0,0,.5*r,.5*n);return[c,d,-d,c,e,t]}),u.setRelativeLevels=((...e)=>{o=[...e]}),u.setSize(e,t),u.setPanZoom(.5,.5),u.setRelativeLevels(0),u},{VIEW_SIZE:Zr,IN_DOM:Vr}=e,{ERROR:Ur}=f;var Yr=e=>{const t=(e=>{let t=e(),r=!1;return{dispatch:n=>{if(r)throw new Error(`*** Reducers are not allowed to dispatch, but received ${n.type}.`);try{r=!0,t=e(t,n)}catch(e){console.error("*** State update error: ***",e)}finally{r=!1}},getState:()=>t}})(((...e)=>{e.forEach((e,t)=>{if("function"!=typeof e)throw new Error(`Reducer in argument ${t+1} is not a function.`)});const t=e.reduce((e,t)=>Object.assign(e,t()),{});return(r=t,n)=>e.reduce((e,t)=>t(e,n),r)})(nt,Et,Rt,bt,Dt,Wt)),r=Hr(e.clientWidth,e.clientHeight);r.setRelativeLevels(.5,2);const n=r();ae(e,t),((e,{dispatch:t,getState:r})=>{Object.defineProperties(e,{overlays:{get:()=>({add:e=>t({type:de,data:ve(e)}),addAndSelect:e=>{const r=ve(e);t({type:de,data:r}),t({type:ue.CLEAR,data:null}),t({type:ue.ADD,data:[r.id]})},clear:()=>t({type:ce,data:[]}),delete:e=>t({type:me,data:x(e)}),get:e=>{if(r().overlays[e])return Object.assign({},r().overlays[e])},getAll:()=>{const{overlays:e}=r(),t={};return Object.keys(e).forEach(r=>{t[r]=Object.assign({},e[r])}),t},setAll:e=>{if(!Array.isArray(e))throw Error(`Expected an array, got ${typeof e}.`);t({type:ce,data:e.map(ve)})},size:()=>Object.keys(r().overlays).length,update:e=>t({type:ge,data:e})}),set:t=>e.overlays.setAll(t)}});const n=(n,{ADD:o,REMOVE:i,CLEAR:a})=>{Object.defineProperty(e,n,{value:{add:(...e)=>{const{overlays:n}=r(),i=e.map(x).filter(e=>n[e]);t({type:o,data:i})},addAll:()=>t({type:o,data:Object.keys(r().overlays)}),contains:e=>Boolean(r()[n][e]),clear:()=>t({type:a,data:null}),list:()=>Object.keys(r()[n]),remove:(...e)=>t({type:i,data:e.map(x)}),size:()=>e[n].list().length}})};n("selectedOverlays",ue),n("highlightedOverlays",pe)})(e,t),((e,{dispatch:t,getState:r})=>{Object.defineProperties(e,{markers:{get:()=>({add:e=>t({type:fe,data:ye(e)}),clear:()=>t({type:he,data:[]}),delete:e=>t({type:be,data:x(e)}),get:e=>{if(r().markers[e])return Object.assign({},r().markers[e])},getAll:()=>{const{markers:e}=r(),t={};return Object.keys(e).forEach(r=>{t[r]=Object.assign({},e[r])}),t},setAll:e=>{if(!Array.isArray(e))throw Error(`Expected an array, got ${typeof e}`);t({type:he,data:e.map(ye)})},size:()=>Object.keys(r().markers).length,update:e=>t({type:we,data:e})}),set:t=>e.markers.setAll(t)}})})(e,t),e.fromPixels=n.fromPixels,e.toPixels=n.toPixels;const o=tr(()=>{const{clientWidth:r,clientHeight:n}=e;return t.dispatch({type:Zr,data:{viewWidth:r,viewHeight:n}}),t.getState()});o(e=>{const{viewWidth:t,viewHeight:r}=e;return{viewWidth:t,viewHeight:r}},({viewWidth:e,viewHeight:t})=>{r.setSize(e,t)});o(e=>{const{panX:t,panY:r,zoom:n}=e;return{panX:t,panY:r,zoom:n}},({panX:e,panY:t,zoom:n})=>{r.setPanZoom(e,t,n)}),o(e=>e.rotation,r.setRotation);const i=Tr(e,()=>n);e.initialize=(()=>{t.dispatch({type:Vr,data:!0}),i.initialize()}),e.tearDown=(()=>t.dispatch({type:Vr,data:!1})),o(e=>e.currentImage,e=>{i.setSource(e)}),o(e=>e.orderedImages,e=>{e&&i.setOrderedImages(e)});o(e=>e.toolsControl?{invert:e.invert,brightness:e.brightness,contrast:e.contrast}:null,e=>i.updateFilters(e));o(e=>{const{message:t,currentImage:r,images:n}=e,o=n[r];return o&&o.error?{text:o.error.message,type:Ur}:t},e=>{if(e){const{text:t,type:r,closer:n}=e;i.setMessage(t,r,n)}else i.clearMessage()});const a=e=>{const{images:t,currentImage:r}=e;return t[r]};o(a,t=>{if(t&&!t.error&&e.src)if(n.setImage(t),t.tilePath){const{width:e,height:r}=t,o=Math.floor(n.getBottomZoomLevel()),a=Math.ceil(n.getTopZoomLevel());i.initTiles({width:e,height:r,lowestLevel:o,highestLevel:a})}else i.setSingleImage(t)},(e,t)=>e===t);o(e=>{const t=a(e);return n&&t&&t.dzi?n.getVisibleTiles():null},i.updateTiles);o(e=>e.overlays,i.updateOverlays);o(e=>e.selectedOverlays,i.updateSelection);o(e=>{const t=e.selectedOverlays,r=e.highlightedOverlays,o=new Set(Object.keys(t).concat(Object.keys(r)));e.currentHoveredOverlay&&o.add(e.currentHoveredOverlay);const i={};return o.forEach(t=>{const r=e.overlays[t],{x:o,y:a}=n.toPixels(r.x,r.y),{x:s,y:l}=n.toPixels(r.x+r.width,r.y+r.height),c=s-o,d=l-a;i[t]={x:o,y:a,width:c,height:d}}),i},i.updateSelectionRects);o(({selectedOverlays:e,overlays:t})=>{const r=Object.keys(e).map(e=>t[e]);return r.length?r.reduce((e,t)=>{const{x:r,y:n,width:o,height:i,type:a}=t,s=r+o,l=n+i;return{xmin:e.xmin<r?e.xmin:r,ymin:e.ymin<n?e.ymin:n,xmax:e.xmax>s?e.xmax:s,ymax:e.ymax>l?e.ymax:l,type:e.type&&e.type!==a?"multi":a}},{xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0}):null},i.updateSelectionHandles);o(({startPoint:e,currentPoint:t})=>({start:e,end:t}),i.updateDragRectangle);o(({behavior:e})=>e===h.DRAWING,i.updateIsDrawing);o(e=>e.markers,i.updateMarkers),o(()=>n?n.getTransformMatrix():null,i.setTransform),o(e=>e.fullscreenControl,e=>i.updateFullscreenControl(e)),o(e=>e.fullscreen,e=>i.updateFullscreen(e)),o(e=>e.gridControl,e=>i.updateGridControl(e)),o(e=>e.downloadControl,e=>i.updateDownloadControl(e)),o(e=>e.toolsControl,e=>i.updateToolsControl(e)),o(e=>e.brightness,e=>i.updateBrightnessSlider(e)),o(e=>e.contrast,e=>i.updateContrastSlider(e)),o(e=>e.noZoom,e=>i.updateHideZoomControl(e)),o(e=>e.hideZoomButtons,e=>i.updateHideZoomControl(e)),o(e=>e.locale,e=>i.updateLocale(e)),o(e=>e.navigation,e=>i.updateNavigation(e)),o(e=>e.navigationArrows,e=>i.updateNavigationArrows(e)),o(e=>e.navigationReturnToOrig,e=>i.updateNavigationReturnToOrig(e)),Cr({node:e,getViewManager:()=>n,store:t,updater:o}),Br(e,o)};const qr="fs-single-image-viewer";if(!customElements.get(qr)){class e extends HTMLElement{constructor(){super(),Yr(this)}connectedCallback(){setTimeout(this.initialize,0)}disconnectedCallback(){this.tearDown()}static get observedAttributes(){return["src","index","zoom","pan-x","pan-y","min-zoom","max-zoom","rotation","no-pan","no-rotate","no-zoom","on-image-load","on-point","on-point-down","on-draw","listening-to-keyboard","credentials","scrolling-parent","invert","brightness","contrast","tools-control","fullscreen-control","grid-control","download-control","download-image","hide-zoom-buttons","locale","navigation","navigation-arrows","navigation-return-to-orig"]}attributeChangedCallback(e,t,r){const n=O(e);switch(n){case"onImageLoad":case"onPoint":case"onPointDown":case"onDraw":this[n]=r?Function("event",r):null;break;default:this[n]=r}}}customElements.define(qr,e)}}();
